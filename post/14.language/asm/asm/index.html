<!doctype html><html lang=zh-cn itemscope itemtype=http://schema.org/WebPage>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>ASM汇编语言基础 - Justice的小站</title>
<meta name=renderer content="webkit">
<meta name=referrer content="no-referrer">
<meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes">
<meta name=MobileOptimized content="width">
<meta name=HandheldFriendly content="true">
<meta name=applicable-device content="pc,mobile">
<meta name=theme-color content="#f8f5ec">
<meta name=msapplication-navbutton-color content="#f8f5ec">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec">
<meta name=mobile-web-app-capable content="yes">
<meta name=author content="Justice">
<meta name=description content="ASM汇编语言基础 简介 计算机最底层的语言是机器语言； 机器语言由一系列机器指令组成，现代二进制计算机的机器指令都是一系列01串，对应硬件中的高">
<meta name=keywords content="tech,it,blog">
<meta name=generator content="Hugo 0.88.1">
<link rel=canonical href=https://justice.bj.cn/post/14.language/asm/asm/>
<link rel=icon href=/favicon.ico>
<link rel=stylesheet href=/sass/jane.min.34a0cf3583dc0fd6b4e3fe24a36c076984feee75ebc2792cff33928ccdcfc628.css integrity="sha256-NKDPNYPcD9a04/4ko2wHaYT+7nXrwnks/zOSjM3Pxig=" media=screen crossorigin=anonymous>
<meta property="og:title" content="ASM汇编语言基础">
<meta property="og:description" content="ASM汇编语言基础 简介 计算机最底层的语言是机器语言； 机器语言由一系列机器指令组成，现代二进制计算机的机器指令都是一系列01串，对应硬件中的高">
<meta property="og:type" content="article">
<meta property="og:url" content="https://justice.bj.cn/post/14.language/asm/asm/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2024-01-05T22:16:21+08:00">
<meta property="article:modified_time" content="2024-01-05T22:16:21+08:00"><meta property="og:site_name" content="Justice的小站">
<meta itemprop=name content="ASM汇编语言基础">
<meta itemprop=description content="ASM汇编语言基础 简介 计算机最底层的语言是机器语言； 机器语言由一系列机器指令组成，现代二进制计算机的机器指令都是一系列01串，对应硬件中的高"><meta itemprop=datePublished content="2024-01-05T22:16:21+08:00">
<meta itemprop=dateModified content="2024-01-05T22:16:21+08:00">
<meta itemprop=wordCount content="5172">
<meta itemprop=keywords content="language,asm,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="ASM汇编语言基础">
<meta name=twitter:description content="ASM汇编语言基础 简介 计算机最底层的语言是机器语言； 机器语言由一系列机器指令组成，现代二进制计算机的机器指令都是一系列01串，对应硬件中的高"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<div id=mobile-navbar class=mobile-navbar>
<div class=mobile-header-logo>
<a href=/ class=logo>Justice's Blog</a>
</div>
<div class=mobile-navbar-icon>
<span></span>
<span></span>
<span></span>
</div>
</div>
<nav id=mobile-menu class="mobile-menu slideout-menu">
<ul class=mobile-menu-list>
<li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/>主页</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/post/>点滴</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/tags/>标签</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/categories/>分类</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=http://passer-by.com/pacman/ rel=noopener target=_blank>
更多
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6 21.568 21.632 54.144 54.208 54.144 54.208C534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92.0.0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"/><path d="M841.152 457.152c-30.528.0-54.784 24.512-54.784 54.656V786.56H237.696V237.696h206.016c6.656.0 10.752.0 13.248.0 30.72.0 55.04-24.512 55.04-54.848C512 152.32 487.36 128 456.96 128H183.04C153.216 128 128 152.576 128 182.848c0 3.136.256 6.272.768 9.28C128.256 195.136 128 198.272 128 201.408v639.488c0 .064.0.192.0.256.0.128.0.192.0.32.0 30.528 24.512 54.784 54.784 54.784H829.76c6.592.0 9.728.0 11.712.0 28.736.0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344v-20.352V561.408v-49.28C896 481.792 871.424 457.152 841.152 457.152z"/></svg>
</i>
</a>
</li>
</ul>
</nav>
<link rel=stylesheet href=/lib/photoswipe/photoswipe.min.css>
<link rel=stylesheet href=/lib/photoswipe/default-skin/default-skin.min.css>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div>
<header id=header class="header container">
<div class=logo-wrapper>
<a href=/ class=logo>
Justice's Blog
</a>
</div>
<nav class=site-navbar>
<ul id=menu class=menu>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/>主页</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/post/>点滴</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/tags/>标签</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/categories/>分类</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=http://passer-by.com/pacman/ rel=noopener target=_blank>
更多
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6 21.568 21.632 54.144 54.208 54.144 54.208C534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92.0.0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"/><path d="M841.152 457.152c-30.528.0-54.784 24.512-54.784 54.656V786.56H237.696V237.696h206.016c6.656.0 10.752.0 13.248.0 30.72.0 55.04-24.512 55.04-54.848C512 152.32 487.36 128 456.96 128H183.04C153.216 128 128 152.576 128 182.848c0 3.136.256 6.272.768 9.28C128.256 195.136 128 198.272 128 201.408v639.488c0 .064.0.192.0.256.0.128.0.192.0.32.0 30.528 24.512 54.784 54.784 54.784H829.76c6.592.0 9.728.0 11.712.0 28.736.0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344v-20.352V561.408v-49.28C896 481.792 871.424 457.152 841.152 457.152z"/></svg>
</i>
</a>
</li>
<li class=menu-item>
<a id=search-btn class="menu-item-link menu-item-search" href=#>
<i class=iconfont><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="18" height="18" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M973.81454219 973.81454219a91.78207815 91.78207815.0 01-129.80999631.0L682.0297247 811.83972101a425.48527711 425.48527711.0 01-230.35931791 68.16531768 428.3346319 428.3346319.0 11428.3346319-428.3346319A425.48527711 425.48527711.0 01811.83972101 682.0297247l162.02961656 161.97482118a91.83687354 91.83687354.0 01-.05479538 129.80999631zm-522.1441354-828.1209266a305.97679241 305.97679241.0 100 611.95358361 305.97679241 305.97679241.0 000-611.95358361z"/></svg>
</i>
</a>
</li>
</ul>
</nav>
</header>
<div id=mobile-panel>
<main id=main class="main bg-llight">
<div class=content-wrapper>
<div id=content class="content container">
<article class="post bg-white">
<header class=post-header>
<h1 class=post-title>ASM汇编语言基础</h1>
<div class=post-meta>
<time datetime=2024-01-05 class=post-time>
2024-01-05 22:16:21
</time>
<div class=post-category>
<a href=https://justice.bj.cn/categories/language/> language </a>
<a href=https://justice.bj.cn/categories/asm/> asm </a>
</div>
<span id=busuanzi_container_page_pv>
| 阅读 <span id=busuanzi_value_page_pv></span>
</span>
</div>
</header>
<div class=post-toc id=post-toc>
<h2 class=post-toc-title>文章目录</h2>
<div class=post-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#简介>简介</a></li>
<li><a href=#cpu架构>CPU架构</a></li>
<li><a href=#寄存器>寄存器</a>
<ul>
<li></li>
<li><a href=#栈桢>栈桢</a></li>
</ul>
</li>
<li><a href=#x86汇编语言格式>x86汇编语言格式</a>
<ul>
<li><a href=#intel-和-att-汇编区别>Intel 和 AT&T 汇编区别</a></li>
</ul>
</li>
<li><a href=#汇编语言组成>汇编语言组成</a>
<ul>
<li><a href=#指令>指令()</a></li>
<li><a href=#伪指令pseudo-instruction>伪指令(Pseudo Instruction)</a></li>
</ul>
</li>
<li><a href=#内存寻址>内存寻址</a></li>
<li><a href=#att汇编>AT&T汇编</a>
<ul>
<li><a href=#att伪指令>AT&T伪指令</a></li>
<li><a href=#变量>变量</a></li>
<li><a href=#定义函数>定义函数</a></li>
<li><a href=#操作数>操作数</a></li>
<li><a href=#标签作操作数>标签作操作数</a></li>
<li><a href=#指令后缀>指令后缀</a></li>
<li><a href=#重要的指令>重要的指令</a></li>
<li><a href=#att汇编示例>AT&T汇编示例</a></li>
</ul>
</li>
<li><a href=#intel汇编>Intel汇编</a>
<ul>
<li><a href=#通用数据传送指令>通用数据传送指令</a></li>
<li><a href=#输入输出指令>输入输出指令</a></li>
<li><a href=#目的地址传送指令>目的地址传送指令</a></li>
<li><a href=#标志传送指令>标志传送指令</a></li>
<li><a href=#eflags寄存器>EFLAGS寄存器</a></li>
<li><a href=#跳转指令>跳转指令</a></li>
<li><a href=#c语言程序的堆栈图>C语言程序的堆栈图</a></li>
<li><a href=#intel汇编示例>intel汇编示例</a></li>
</ul>
</li>
<li><a href=#参考>参考</a></li>
</ul>
</nav>
</div>
</div>
<div class=post-content>
<h1 id=asm汇编语言基础>ASM汇编语言基础</h1>
<h2 id=简介>简介</h2>
<ul>
<li>
<p>计算机最底层的语言是机器语言；</p>
</li>
<li>
<p>机器语言由一系列机器指令组成，现代二进制计算机的机器指令都是一系列01串，对应硬件中的高低电平；</p>
</li>
<li>
<p>汇编语言是计算机机器语言的一种助记表示；</p>
</li>
<li>
<p>汇编语言的主体是汇编指令，每条汇编指令对应一条机器指令；</p>
</li>
<li>
<p>汇编语言可直接访问CPU内部的各个部件，CPU安装汇编语言生成的机器码按序执行；</p>
</li>
<li>
<p>汇编语言和具体的机器体系架构直接相关；</p>
</li>
</ul>
<h2 id=cpu架构>CPU架构</h2>
<p><img src=https://raw.githubusercontent.com/ZhuZhengyi/notebook-images/master/2023/03/01-20-21-18-2023-03-01-20-21-04-image.png alt></p>
<h2 id=寄存器>寄存器</h2>
<p>寄存器按照其用途可分为以下4类:</p>
<ul>
<li>数据寄存器</li>
<li>指针及变址寄存器</li>
<li>段寄存器</li>
<li>控制寄存器</li>
</ul>
<table>
<thead>
<tr>
<th>类型</th>
<th>寄存器名称</th>
<th>8位</th>
<th>16位</th>
<th>32位</th>
<th>64位</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>通用数据寄存器</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>用来存放操作数，运算结果或者其他信息。</td>
</tr>
<tr>
<td></td>
<td>累加寄存器</td>
<td>AH|AL</td>
<td>AX</td>
<td>EAX</td>
<td>RAX</td>
<td></td>
</tr>
<tr>
<td></td>
<td>基址寄存器</td>
<td>BH|BL</td>
<td>BX</td>
<td>EBX</td>
<td>RBX</td>
<td></td>
</tr>
<tr>
<td></td>
<td>计数寄存器</td>
<td>CH|CL</td>
<td>CX</td>
<td>ECX</td>
<td>RCX</td>
<td></td>
</tr>
<tr>
<td></td>
<td>数据寄存器</td>
<td>DH|DL</td>
<td>DX</td>
<td>EDX</td>
<td>RDX</td>
<td>在某些IO指令中,DX被用来存放端口地址;</td>
</tr>
<tr>
<td>指针及变址寄存器</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>基址寄存器<br>(BasePoint)</td>
<td></td>
<td>BP</td>
<td>EBP</td>
<td>RBP</td>
<td>栈桢(Frame)底指针</td>
</tr>
<tr>
<td></td>
<td>栈顶指针寄存器<br>(StackPoint)</td>
<td></td>
<td>SP</td>
<td>ESP</td>
<td>RSP</td>
<td>栈栈顶指针</td>
</tr>
<tr>
<td></td>
<td>源变址寄存器<br>(SourceIndex)</td>
<td></td>
<td>SI</td>
<td>ESI</td>
<td>RSI</td>
<td>DS:SI一般表示源地址</td>
</tr>
<tr>
<td></td>
<td>目的变址寄存器<br>(DestIndex)</td>
<td></td>
<td>DI</td>
<td>EDI</td>
<td>RDI</td>
<td>ES:DI一般表示目的地址</td>
</tr>
<tr>
<td>指令及状态寄存器</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>指令指针寄存器<br>(InstructPointer)</td>
<td></td>
<td>IP</td>
<td>EIP</td>
<td>RIP</td>
<td>CS:IP表示了当前执行指令在内存中的地址</td>
</tr>
<tr>
<td></td>
<td>状态寄存器</td>
<td></td>
<td>FLAGS</td>
<td>EFLAGS</td>
<td>RFLAGS</td>
<td>存放条件标志码、控制标志和系统标志等</td>
</tr>
<tr>
<td>段寄存器</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>代码段寄存器<br>(CodeSegment)</td>
<td></td>
<td>CS</td>
<td>ECS</td>
<td></td>
<td>代码段起始地址</td>
</tr>
<tr>
<td></td>
<td>数据段寄存器<br>(DataSegment)</td>
<td></td>
<td>DS</td>
<td>EDS</td>
<td></td>
<td>数据段起始地址</td>
</tr>
<tr>
<td></td>
<td>栈寄存器<br>(StackSegment)</td>
<td></td>
<td>SS</td>
<td>ESS</td>
<td></td>
<td>栈</td>
</tr>
<tr>
<td></td>
<td>附加段寄存器<br>(ExtentSegment)</td>
<td></td>
<td>ES</td>
<td>EES</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>FS</td>
<td>EFS</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>GS</td>
<td>EGS</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>TSS寄存器</td>
<td></td>
<td>TR</td>
<td></td>
<td></td>
<td>指向当前任务的TSS段</td>
</tr>
<tr>
<td></td>
<td>中断描述符表寄存器</td>
<td></td>
<td>IDTR</td>
<td></td>
<td></td>
<td>指向中断表述符表在内存中的起始位置</td>
</tr>
<tr>
<td></td>
<td>全局描述符表寄存器</td>
<td></td>
<td>GDTR</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>局部描述符表寄存器</td>
<td></td>
<td>LDTR</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><img src=https://raw.githubusercontent.com/ZhuZhengyi/notebook-images/master/2024/01/05-12-37-52-2024-01-05-12-37-45-image.png alt></p>
<h4 id=寄存器使用约定>寄存器使用约定</h4>
<p>x86 调用约定（不同编译器可能不遵守）：</p>
<ul>
<li>
<p><code>%rax</code>：用作返回值寄存器</p>
</li>
<li>
<p><code>%rip</code>：指令指针寄存器，存放下条指令的地址</p>
</li>
</ul>
<p>函数调用时：</p>
<ul>
<li>
<p>如果参数数量 &lt;= 6，就通过 <code>%rdi</code>、<code>%rsi</code>、<code>%rdx</code>、<code>%rcx</code>、<code>%r8</code>、<code>%r9</code> 的寄存器来传递参数，分别对应函数的第 1 ~ 6 个参数。</p>
</li>
<li>
<p>如果参数数量 > 6，需要通过栈来传递。传递时对齐 8 字节。</p>
</li>
</ul>
<p><strong>调用者保存寄存器和被调用者保存寄存器</strong></p>
<ul>
<li>
<p>调用者(Caller)保存: <code>%rdi, %rsi, %rdx, %rcx, %r8, %r9, %r10, %r11</code> </p>
</li>
<li>
<p>被调用者(Callee)保存: <code>%rbx, %rbp, %rsp, %r12, %r13, %r14</code></p>
</li>
</ul>
<h3 id=栈桢>栈桢</h3>
<p><code>%rsp</code> 和 <code>%rbp</code> 都可以被称为栈指针（stack pointer）。</p>
<ul>
<li>
<p><code>%rsp</code> 是栈顶指针，它指示栈顶的位置。</p>
</li>
<li>
<p><code>%rbp</code> 是栈基址指针，它指向当前栈底的位置，它是历史栈顶的快照，因此也充当各栈帧的分隔符。</p>
</li>
</ul>
<p>通过 <code>%rbp</code>，内存中串起一个栈帧链表。只要不断对其解引用就可以回溯到最前面的栈帧。</p>
<p><img src=https://raw.githubusercontent.com/ZhuZhengyi/notebook-images/master/2024/01/03-19-48-11-2024-01-03-19-48-03-image.png alt></p>
<h2 id=x86汇编语言格式>x86汇编语言格式</h2>
<ul>
<li>
<p>x86汇编语言是基于intel x86系列处理器所用的汇编语言标准；</p>
</li>
<li>
<p>常用的x86汇编语言格式主要分为2种：</p>
<ul>
<li>
<p>intel x86汇编语言格式</p>
<ul>
<li>由intel自己主导设计；</li>
</ul>
</li>
<li>
<p>AT&T x86汇编语言格式</p>
<ul>
<li>
<p>由发明unix的AT&T实验室设计；</p>
</li>
<li>
<p>unix, linux, gcc相关的工具链都是使用该汇编语言格式；</p>
</li>
<li>
<p>go语言的汇编是AT&T汇编的一个变种；</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id=intel-和-att-汇编区别>Intel 和 AT&T 汇编区别</h3>
<p>intel和AT&T汇编的主要区别如下：</p>
<table>
<thead>
<tr>
<th>Intel Code</th>
<th>AT&T Code</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>mov eax,1</td>
<td>movl $1,%eax</td>
<td>将eax设为1</td>
</tr>
<tr>
<td>mov ebx, 0ffh</td>
<td>movl $0xff,%ebx</td>
<td>将ebx设置为0xff</td>
</tr>
<tr>
<td>int 80h</td>
<td>int $0x80</td>
<td>调用0x80中断处理程序</td>
</tr>
<tr>
<td>mov ebx, eax</td>
<td>movl %eax, %ebx</td>
<td>将eax中的值复制到ebx中</td>
</tr>
<tr>
<td>mov eax,[ecx]</td>
<td>movl (%ecx),%eax</td>
<td>将eax中的值作为偏移，</td>
</tr>
<tr>
<td>mov eax,[ebx+3]</td>
<td>movl 3(%ebx),%eax</td>
<td></td>
</tr>
<tr>
<td>mov eax,[ebx+20h]</td>
<td>movl 0x20(%ebx),%eax</td>
<td></td>
</tr>
<tr>
<td>add eax,[ebx+ecx*2h]</td>
<td>addl (%ebx,%ecx,0x2),%eax</td>
<td></td>
</tr>
<tr>
<td>lea eax,[ebx+ecx]</td>
<td>leal (%ebx,%ecx),%eax</td>
<td></td>
</tr>
<tr>
<td>sub eax,[ebx+ecx*4h-20h]</td>
<td>subl -0x20(%ebx,%ecx,0x4),%eax</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th></th>
<th>Intel</th>
<th>AT&T</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>寄存器命名</td>
<td>eax</td>
<td>%eax</td>
<td></td>
</tr>
<tr>
<td>操作数顺序</td>
<td><op> <dst>, <src></td>
<td><op> <src>,<dst></td>
<td></td>
</tr>
<tr>
<td>立即数</td>
<td>_value</td>
<td>$_value</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mov ebx,0xd00d</td>
<td>movl $0xd00d,%ebx</td>
<td>将0xd00d地址存入ebx寄存器</td>
</tr>
<tr>
<td>操作数长度标识</td>
<td>mov bx,ax</td>
<td>movw %ax,%bx</td>
<td></td>
</tr>
<tr>
<td>间接寻址方式</td>
<td>immed32(basepointer,<br>indexpointer,indexscale)</td>
<td>[basepointer + <br>indexpointer*indexscale + immed32]</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id=汇编语言组成>汇编语言组成</h2>
<ul>
<li>
<p>汇编语言由一系列汇编指令和伪指令组成；</p>
</li>
<li>
<p>每条汇编指令对应一条机器码，可由机器直接执行生成的机器码；</p>
</li>
<li>
<p>伪指令用于汇编程序提供附加信息，用于控制汇编程序生成机器码，本身没有机器码对应，无法由机器执行；</p>
</li>
</ul>
<h3 id=指令>指令()</h3>
<ul>
<li>
<p>指令由字母开头；</p>
</li>
<li>
<p>指令格式为：<code>&lt;OP> []</code>；</p>
</li>
<li>
<p>每条指令至少包含一个操作码；</p>
</li>
<li>
<p>每条指令对应一条机器码；</p>
</li>
<li>
<p>指令生成机器码后，可由硬件执行；</p>
</li>
</ul>
<h3 id=伪指令pseudo-instruction>伪指令(Pseudo Instruction)</h3>
<ul>
<li>
<p>伪指令(Pseudo Instruction)是用于对汇编过程进行控制的指令；</p>
</li>
<li>
<p>伪指令只用于汇编过程中为汇编程序提供汇编信息，不可执行指令，没有机器代码。例如：哪些是指令、哪些是数据及数据的字长、程序的起始地址和结束地址等；</p>
</li>
<li>
<p>伪指令都由句号（'.'）开头，其余是字母,通常使用小写;</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>类别</th>
<th>伪指令</th>
<th>格式</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>.code16</td>
<td>.code16</td>
<td>生成16位的指令</td>
<td></td>
</tr>
<tr>
<td></td>
<td>.globl</td>
<td>.globl &lt;label_name></td>
<td>将符号定义为全局可链接的，<br>使符号可跨文件访问</td>
<td><code>.globl SYMBOL_NAME(idt)</code></td>
</tr>
<tr>
<td></td>
<td>.extern</td>
<td>.extern &lt;label_name></td>
<td>定义外部符号</td>
<td></td>
</tr>
<tr>
<td></td>
<td>.text</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>数据定义</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>.byte</td>
<td>.byte <b1>[,<b2>,..]</td>
<td>定义字节</td>
<td><code>.byte 0x80,0xca</code></td>
</tr>
<tr>
<td></td>
<td>.word</td>
<td>.word <w1>[,<w2>,..]</td>
<td></td>
<td><code>.word 0x800,</code></td>
</tr>
<tr>
<td></td>
<td>.file</td>
<td>.file &ldquo;<string>&rdquo;</td>
<td>开启一个逻辑文件</td>
<td><code>.file ”stage1.s”</code></td>
</tr>
<tr>
<td></td>
<td>.fill</td>
<td>.fill <rep>,<size>,<val></td>
<td>填充<rep>*<size>个val</td>
<td>.fill NR_CPUS*4,8,0</td>
</tr>
<tr>
<td>符号定义</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>.equ</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>伪指令分为：</p>
<ul>
<li>
<p>数据定义伪指令</p>
<ul>
<li>
<p>格式：<code>[&lt;变量名>] &lt;类型> &lt;初值表></code></p>
</li>
<li></li>
</ul>
</li>
<li>
<p>符号定义伪指令</p>
<ul>
<li>
<p>EQU（等值伪指令）：<code>&lt;符号名> EQU &lt;表达式></code></p>
</li>
<li></li>
</ul>
</li>
<li></li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-nasm data-lang=nasm><span class=nf>.code16</span>               <span class=c1>; 生成16位的指令</span>
<span class=nf>.section</span> <span class=nv>.data</span>        <span class=c1>; 数据段</span>
<span class=nf>.section</span> <span class=nv>.text</span>        <span class=c1>; 代码段</span>


<span class=nf>.file</span> <span class=err>”</span><span class=nv>stage1.s</span><span class=err>”</span>
</code></pre></td></tr></table>
</div>
</div><h2 id=内存寻址>内存寻址</h2>
<table>
<thead>
<tr>
<th></th>
<th>intel</th>
<th>AT&T</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>立即数寻址</td>
<td><code>MOV EBX, 2</code></td>
<td><code>movl $2, %ebx</code></td>
<td>将32bit的立即数2存入寄存器ebx中</td>
</tr>
<tr>
<td>直接寻址</td>
<td><code>MOV EAX, 8000h</code></td>
<td><code>movl 0x8000, %eax</code></td>
<td>将内存地址0x8000上的32位数据放到eax中</td>
</tr>
<tr>
<td>间接寻址</td>
<td><code>MOV EBX, [EAX]</code></td>
<td><code>movl (%eax), %ebx</code></td>
<td></td>
</tr>
<tr>
<td>基址寻址</td>
<td><code>MOV EBX, [EAX-4]</code></td>
<td><code>movl -4(%eax), %ebx</code></td>
<td></td>
</tr>
<tr>
<td>变址寻址</td>
<td><code>MOV ECX, [EAX+EBX+4]</code></td>
<td><code>movl 4(%eax，%ebx), %ecx</code></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id=att汇编>AT&T汇编</h2>
<h3 id=att伪指令>AT&T伪指令</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>.byte 0x80,0xca    //.byte 伪指令
.word 0x800
</code></pre></td></tr></table>
</div>
</div><h3 id=变量>变量</h3>
<ul>
<li>寄存器前被冠以“%”</li>
<li>立即数前被冠以“$”</li>
<li>十六进制数前被冠以“0x”</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-nasm data-lang=nasm>    <span class=nf>.globl</span>  <span class=nv>var</span>
    <span class=nf>.data</span>
    <span class=nf>.align</span> <span class=mi>4</span>
    <span class=nf>.type</span>   <span class=nv>var</span><span class=p>,</span> <span class=err>@</span><span class=nv>object</span>
    <span class=nf>.size</span>   <span class=nv>var</span><span class=p>,</span> <span class=mi>4</span>
<span class=nl>var:</span>
    <span class=nf>.long</span>   <span class=mi>10</span>
</code></pre></td></tr></table>
</div>
</div><p>应该放在<code>.data</code>之后，使用“<code>.类型 值</code>”的形式定义，基本类型有byte、short、long 3种，分别占用1/2/4个字节。</p>
<p>然后在之前加上标签。标签不是必须的，标签是当前数据的地址，在其它地方可以使用标签。还有其它定义形式：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>    .long 1,2,3
    .zero 10
    .string &#34;hello&#34;
</code></pre></td></tr></table>
</div>
</div><p>第一行，类似指定一个数组。</p>
<p>第二行，10个字节的数据，全部为0。</p>
<p>第三行，一个字符串。当然，需要.globl声明这个符号，以及指定对齐、类型、大小等。</p>
<h3 id=定义函数>定义函数</h3>
<p>和变量定义类似</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-nasm data-lang=nasm>    <span class=nf>.text</span>
    <span class=nf>.globl</span>  <span class=nv>func</span>
    <span class=nf>.type</span>   <span class=nv>func</span><span class=p>,</span> <span class=err>@</span><span class=nv>function</span>
<span class=nl>func:</span>
    <span class=err>汇编指令</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=操作数>操作数</h3>
<p>有3类操作数，立即数、寄存器和存储器引用。下面是3种操作数的AT&T语法：</p>
<ul>
<li>
<p>立即数，使用$加一个数字，如$1, $-20, $0x12等。</p>
</li>
<li>
<p>寄存器，使用%加上寄存器的名字，如%ebp, %ah等。</p>
</li>
<li>
<p>存储器引用，格式为Imm(Ea,Ei,s)，存储器的值为Imm + Ea + Ei * s，s必须为1,2,4,8。可以省略Imm, Ei和s。如下合法的存储器引用：(%ebp), -1(%ebp), 7(%edx,%edx,4)。甚至可以直接是数字表示的内存地址，如0x100.</p>
</li>
</ul>
<h3 id=标签作操作数>标签作操作数</h3>
<p>如果标签var是变量，则var表示的变量的内存地址，$var表示的内存地址的立即数。</p>
<ul>
<li>
<p>mov var, %eax，把var地址处内存的值拷贝到eax。</p>
</li>
<li>
<p>mov $var, %eax，把var值拷贝到寄存器eax。</p>
</li>
<li>
<p>mov var+1, %eax，把var+1地址处内存的值拷贝到eax。</p>
</li>
<li>
<p>mov $var+1, %eax，把var+1值拷贝到寄存器eax。</p>
</li>
</ul>
<h3 id=指令后缀>指令后缀</h3>
<table>
<thead>
<tr>
<th>C声明</th>
<th>Intel数据类型</th>
<th>后缀</th>
<th>大小</th>
</tr>
</thead>
<tbody>
<tr>
<td>char</td>
<td>字节</td>
<td>b</td>
<td>1</td>
</tr>
<tr>
<td>short</td>
<td>字</td>
<td>w</td>
<td>2</td>
</tr>
<tr>
<td>int</td>
<td>双字</td>
<td>l</td>
<td>4</td>
</tr>
<tr>
<td>long</td>
<td>四字</td>
<td>q</td>
<td>8</td>
</tr>
<tr>
<td>char*</td>
<td>四字</td>
<td>q</td>
<td>8</td>
</tr>
<tr>
<td>float</td>
<td>单精度</td>
<td>s</td>
<td>4</td>
</tr>
<tr>
<td>double</td>
<td>双精度</td>
<td>l</td>
<td>8</td>
</tr>
</tbody>
</table>
<h3 id=重要的指令>重要的指令</h3>
<h4 id=call>call</h4>
<ul>
<li>
<p>负责将被调指令地址写入 <code>rip</code></p>
</li>
<li>
<p>还要负责将返回地址压入栈中</p>
</li>
</ul>
<h4 id=pushpop>push/pop</h4>
<p><code>push</code>把数据压入栈。等价于：先减去栈指针的值，然后将压入数据的值写入栈顶。</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=nf>pushl</span> <span class=no>$0x1234</span>
<span class=err>//</span> <span class=err>等价于</span>
<span class=nf>sub</span> <span class=no>$0x4</span><span class=err>，</span> <span class=nv>%rsp</span>
<span class=nf>movl</span> <span class=no>$0x1234</span> <span class=p>(</span><span class=nv>%rsp</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><p><code>pop</code> 把数据弹出栈，是 <code>push</code> 的逆变换。等价于：把栈顶数据写入操作数，然后增加栈指针的值。</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=nf>popq</span> <span class=nv>%rax</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=att汇编示例>AT&T汇编示例</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=c1>// square.c
</span><span class=c1></span><span class=kt>int32_t</span> <span class=nf>square</span><span class=p>(</span><span class=kt>int32_t</span> <span class=n>num</span><span class=p>)</span> <span class=p>{</span>
    <span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
    <span class=k>return</span> <span class=mi>5</span> <span class=o>*</span> <span class=n>num</span> <span class=o>+</span> <span class=mi>6</span> <span class=o>-</span> <span class=n>k</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></td></tr></table>
</div>
</div><p>对应的AT&T汇编代码为：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-nasm data-lang=nasm><span class=c1>; square.s</span>
<span class=nl>square:</span>
        <span class=err>//</span> <span class=err>注意，此时</span> <span class=nf>create_obj</span> <span class=err>的栈帧还未构建完毕</span>
        <span class=err>//</span> <span class=err>因此</span> <span class=nf>rsp</span> <span class=err>虽然是栈顶指针，但起始指向的是上一个汉奸的栈顶</span>
        <span class=err>//</span> <span class=err>同时</span> <span class=nf>rbp</span> <span class=err>也是指向上一个函数的栈底</span>
        <span class=nf>pushq</span>   <span class=o>%</span><span class=nb>rbp</span>                <span class=o>//</span> <span class=err>保存前一个栈帧栈底到当前栈顶。</span>
                                    <span class=err>//</span> <span class=err>这是为了让上一个函数调用后能恢复它栈底的值到</span> <span class=err>%</span><span class=nf>rbp</span><span class=err>。</span>
        <span class=nf>movq</span>    <span class=o>%</span><span class=nb>rsp</span><span class=p>,</span> <span class=o>%</span><span class=nb>rbp</span>          <span class=o>//</span> <span class=err>保存当前栈顶的值到</span> <span class=s>`%rbp`</span><span class=err>，作为当前函数的栈底指针的值。</span>
        <span class=nf>movl</span>    <span class=o>%</span><span class=nb>edi</span><span class=p>,</span> <span class=o>-</span><span class=mi>20</span><span class=p>(</span><span class=o>%</span><span class=nb>rbp</span><span class=p>)</span>     <span class=o>//</span> <span class=err>将函数的第一个参数</span> <span class=nv>num</span> <span class=err>保存到当前函数的栈底</span> <span class=o>-</span><span class=mi>20</span> <span class=err>处。</span>
        <span class=nf>movl</span>    <span class=kc>$</span><span class=mi>10</span><span class=p>,</span> <span class=o>-</span><span class=mi>4</span><span class=p>(</span><span class=o>%</span><span class=nb>rbp</span><span class=p>)</span>       <span class=o>//</span> <span class=err>将函数的第一个局部变量</span> <span class=nv>k</span> <span class=err>保存到当前函数的栈底</span> <span class=o>-</span><span class=mi>4</span> <span class=err>处。</span>
        <span class=nf>movl</span>    <span class=o>-</span><span class=mi>20</span><span class=p>(</span><span class=o>%</span><span class=nb>rbp</span><span class=p>),</span> <span class=o>%</span><span class=nb>edx</span>     <span class=o>//</span> <span class=err>将变量</span> <span class=nv>num</span> <span class=err>保存到</span> <span class=o>%</span><span class=nb>edx</span> <span class=err>中。</span>
        <span class=nf>movl</span>    <span class=o>%</span><span class=nb>edx</span><span class=p>,</span> <span class=o>%</span><span class=nb>eax</span>          <span class=o>//</span> <span class=err>将变量</span> <span class=nv>num</span> <span class=err>保存到</span> <span class=o>%</span><span class=nb>eax</span> <span class=err>中。</span>
        <span class=nf>sall</span>    <span class=kc>$</span><span class=mi>2</span><span class=p>,</span> <span class=o>%</span><span class=nb>eax</span>            <span class=o>//</span> <span class=err>将变量</span> <span class=nv>num</span> <span class=err>乘以</span> <span class=mi>4</span><span class=err>。</span><span class=p>(</span><span class=err>左移</span> <span class=mi>2</span> <span class=err>相当于乘以</span> <span class=mi>4</span><span class=p>)</span> <span class=err>得到</span> <span class=o>%</span><span class=nb>eax</span> <span class=err>=</span> <span class=nv>num</span> <span class=o>*</span> <span class=mi>4</span><span class=err>。</span>
        <span class=nf>addl</span>    <span class=o>%</span><span class=nb>edx</span><span class=p>,</span> <span class=o>%</span><span class=nb>eax</span>          <span class=o>//</span> <span class=err>将变量</span> <span class=o>%</span><span class=nb>eax</span> <span class=err>加上</span> <span class=o>%</span><span class=nb>edx</span> <span class=err>，即</span> <span class=o>%</span><span class=nb>eax</span> <span class=err>=</span> <span class=nv>num</span> <span class=o>*</span> <span class=mi>4</span> <span class=o>+</span> <span class=nv>num</span> <span class=err>=</span> <span class=nv>num</span> <span class=o>*</span> <span class=mi>5</span><span class=err>。</span>
        <span class=nf>addl</span>    <span class=kc>$</span><span class=mi>6</span><span class=p>,</span> <span class=o>%</span><span class=nb>eax</span>            <span class=o>//</span> <span class=err>将变量</span> <span class=o>%</span><span class=nb>eax</span> <span class=err>加上</span> <span class=mi>6</span><span class=err>，即</span> <span class=o>%</span><span class=nb>eax</span> <span class=err>=</span> <span class=nv>num</span> <span class=o>*</span> <span class=mi>5</span> <span class=o>+</span> <span class=mi>6</span><span class=c1>;</span>
        <span class=nf>subl</span>    <span class=o>-</span><span class=mi>4</span><span class=p>(</span><span class=o>%</span><span class=nb>rbp</span><span class=p>),</span> <span class=o>%</span><span class=nb>eax</span>      <span class=o>//</span> <span class=err>将变量</span> <span class=o>%</span><span class=nb>eax</span> <span class=err>减去</span> <span class=nv>k</span> <span class=err>，即</span> <span class=o>%</span><span class=nb>eax</span> <span class=err>=</span> <span class=nv>num</span> <span class=o>*</span> <span class=mi>5</span> <span class=o>+</span> <span class=mi>6</span> <span class=o>-</span> <span class=nv>k</span><span class=c1>;        </span>
        <span class=nf>popq</span>    <span class=o>%</span><span class=nb>rbp</span>                <span class=o>//</span> <span class=err>将栈顶保存到</span> <span class=o>%</span><span class=nb>rbp</span> <span class=err>中，并释放栈帧。</span>
        <span class=nf>ret</span>
</code></pre></td></tr></table>
</div>
</div><p>编译</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-nasm data-lang=nasm><span class=c1>; demo.s</span>
<span class=nf>.section</span> <span class=nv>.data</span>
<span class=nf>.section</span> <span class=nv>.text</span>
<span class=nf>.globl</span> <span class=nv>_start</span>
<span class=nl>_start:</span>
<span class=nf>movl</span> <span class=kc>$</span><span class=mi>1</span><span class=p>,</span> <span class=o>%</span><span class=nb>eax</span>
<span class=nf>movl</span> <span class=kc>$</span><span class=mi>4</span><span class=p>,</span> <span class=o>%</span><span class=nb>ebx</span>
<span class=nf>int</span> <span class=kc>$</span><span class=mh>0x80</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>// 汇编
[]$ as demo.s -o demo.o
// 链接
[]$ ld demo.o -o demo
//
[]$ ./demo
</code></pre></td></tr></table>
</div>
</div><h2 id=intel汇编>Intel汇编</h2>
<h3 id=通用数据传送指令>通用数据传送指令</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>MOV     传送字或字节
MOVSX   先符号扩展,再传送.  
MOVZX   先零扩展,再传送.  
PUSH    把字压入堆栈.  
POP     把字弹出堆栈.  
PUSHA   把AX,CX,DX,BX,SP,BP,SI,DI依次压入堆栈.  
POPA    把DI,SI,BP,SP,BX,DX,CX,AX依次弹出堆栈.  
PUSHAD  把EAX,ECX,EDX,EBX,ESP,EBP,ESI,EDI依次压入堆栈.  
POPAD   把EDI,ESI,EBP,ESP,EBX,EDX,ECX,EAX依次弹出堆栈.  
BSWAP   交换32位寄存器里字节的顺序  
XCHG    交换字或字节.(至少有一个操作数为寄存器,段寄存器不可作为操作数)  
CMPXCHG 比较并交换操作数.(第二个操作数必须为累加器AL/AX/EAX)  
XADD    先交换再累加.(结果在第一个操作数里)  
XLAT    字节查表转换.----BX指向一张256字节的表的起点,AL为表的索引值(0-255,即0-FFH);返回AL为查表结果.([BX+AL]-&gt;AL)  
</code></pre></td></tr></table>
</div>
</div><h3 id=输入输出指令>输入输出指令</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>IN      I/O端口输入. ( 语法: IN   累加器,    {端口号│DX} )  
OUT     I/O端口输出. ( 语法: OUT {端口号│DX},累加器 )输入输出端口由立即方式指定时,    其范围是 0-255; 由寄存器 DX 指定时,其范围是    0-65535.  
</code></pre></td></tr></table>
</div>
</div><h3 id=目的地址传送指令>目的地址传送指令</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>LEA &lt;DST&gt;, &lt;SRC&gt;  ;将&lt;SRC&gt;的偏移量OA装载到&lt;DST&gt;中.例: LEA DX,string ;  把偏移地址存到DX.  
LDS &lt;DST&gt;, &lt;SRC&gt;  ;将当前数据段中的一个双字数据装入到一个通用寄存器SI(双字数据的低字)和数据段寄存器DS(双字数据的高字)中;
传送目标指针,把指针内容装入DS.例: LDS SI,string   ; 把段地址:偏移地址存到DS:SI.  
LES     传送目标指针,把指针内容装入ES.例: LES DI,string   ;把段地址:偏移地址存到ES:DI.  
LFS     传送目标指针,把指针内容装入FS.例: LFS DI,string   ;把段地址:偏移地址存到FS:DI.  
LGS     传送目标指针,把指针内容装入GS.例: LGS DI,string   ;把段地址:偏移地址存到GS:DI.  
LSS     传送目标指针,把指针内容装入SS.例: LSS DI,string   ;把段地址:偏移地址存到SS:DI.  
</code></pre></td></tr></table>
</div>
</div><h3 id=标志传送指令>标志传送指令</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>LAHF    标志寄存器传送,把标志装入AH.  
SAHF    标志寄存器传送,把AH内容装入标志寄存器.  
PUSHF   标志入栈.  
POPF    标志出栈.  
PUSHD   32位标志入栈.  
POPD    32位标志出栈.  
</code></pre></td></tr></table>
</div>
</div><h3 id=eflags寄存器>EFLAGS寄存器</h3>
<ul>
<li>FR(控制标志位):
<ul>
<li>CF(进位标识位): 进行加减运算时, 如果最高二进制位产生进位或错位, CF则为1, 否则为0. 程序设计中, 常用条件转移指令JC, JNC指令据此标志位实现转移</li>
<li>PF(奇偶标志位): 操作结果中二进制位1的个数为偶数是, PF为1, 某则为0</li>
<li>AF(辅助进位标志位):运算时半字节产生进位或借位时, AF为1, 某则为0. 主要用于BCD码的调整</li>
<li>ZF(零标志位): 运算结果为0时, ZF为1, 否则为0</li>
<li>SF(符号标志位): 当运算结果的最高位为1时, SF为1, 否则为0. 最高位表示符号数的正和负</li>
<li>TF(跟踪标志位): 用于调试程序时进入单步方式工作. TF=1时, 每条指令执行完后产生一个内部中断, 让用户检查指令运行后寄存器, 存储器和各标志位的内容. TF=0时, CPU工作正常, 不产生内部中断</li>
<li>IF(中断允许标志位): IF=1同时中断屏蔽寄存器的相应位为0, 允许系统响应可屏蔽中断, 反之, 不接收外部发出的中断请求</li>
<li>DF(方向位标志位): 用于控制串操作时地址指针位移方向. 当DF=1时, 指针向高地址方向移动</li>
<li>OF(溢出标志位): 算术运算时结果超出系统所能表示的数的范围. 溢出时, OF=1</li>
</ul>
</li>
</ul>
<h3 id=跳转指令>跳转指令</h3>
<h3 id=c语言程序的堆栈图>C语言程序的堆栈图</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span><span class=cp></span><span class=kt>int</span> <span class=nf>function</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span> <span class=p>,</span><span class=kt>int</span> <span class=n>y</span><span class=p>,</span><span class=kt>int</span> <span class=n>z</span><span class=p>)</span> 
<span class=p>{</span>
    <span class=k>return</span> <span class=n>x</span><span class=o>+</span><span class=n>y</span><span class=o>-</span><span class=n>z</span><span class=p>;</span>
<span class=p>}</span>

<span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
<span class=p>{</span>
    <span class=n>function</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>);</span>  <span class=c1>//仅仅调用此函数而已
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table>
</div>
</div><p>堆栈图如下（过程）</p>
<p><img src="https://img-blog.csdnimg.cn/20200726183129316.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RlbGxfbWVfNDA0,size_16,color_FFFFFF,t_70" alt=在这里插入图片描述><br>
<img src="https://img-blog.csdnimg.cn/20200726183221566.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RlbGxfbWVfNDA0,size_16,color_FFFFFF,t_70" alt=在这里插入图片描述><br>
<img src="https://img-blog.csdnimg.cn/20200726183326281.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RlbGxfbWVfNDA0,size_16,color_FFFFFF,t_70" alt=在这里插入图片描述></p>
<p>不同的编译器生成的堆栈图可能不同，要视情况而定</p>
<h3 id=intel汇编示例>intel汇编示例</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-nasm data-lang=nasm><span class=c1>;; 1. 函数调用过程</span>
<span class=c1>; 提升堆栈</span>
<span class=nf>PUSH</span> <span class=nb>EBP</span>             <span class=c1>; 将旧EBP入栈，保存旧栈桢基址</span>
<span class=nf>MOV</span>  <span class=nb>EBP</span><span class=p>,</span> <span class=nb>ESP</span>        <span class=c1>; 将旧栈顶指针ESP设为新的栈桢基址，即新的栈桢紧接父调用的栈桢</span>
<span class=nf>SUB</span>  <span class=nb>ESP</span><span class=p>,</span> <span class=mi>40</span>         <span class=c1>; ESP减少移动40个字节，即开辟40字节大小的函数栈桢空间</span>
<span class=c1>; 保留调用现场</span>
<span class=nf>PUSH</span> <span class=nb>EBX</span>             <span class=c1>; 将EBX入栈</span>
<span class=nf>PUSH</span> <span class=nb>ESI</span>
<span class=nf>PUSH</span> <span class=nb>EDI</span>
<span class=c1>; 向分配的空间填充数据</span>
<span class=nf>LEA</span>  <span class=nb>EDI</span><span class=p>,</span> <span class=kt>DWORD</span> <span class=nv>PTR</span> <span class=nb>SS</span><span class=p>:[</span><span class=nb>EBP</span><span class=o>-</span><span class=mi>40</span><span class=p>]</span>    <span class=c1>;</span>
<span class=nf>MOV</span>  <span class=nb>ECX</span><span class=p>,</span> <span class=mi>10</span>
<span class=nf>MOV</span>  <span class=nb>EAX</span><span class=p>,</span> <span class=nv>CCCCCCCC</span>
<span class=nf>REP</span>  <span class=nv>STOS</span> <span class=kt>DWORD</span> <span class=nv>PTR</span> <span class=nb>ES</span><span class=p>:[</span><span class=nb>EDI</span><span class=p>]</span>
<span class=c1>; 函数功能</span>
<span class=nf>MOV</span>  <span class=nb>EAX</span><span class=p>,</span> <span class=kt>DWORD</span> <span class=nv>PTR</span> <span class=nb>SS</span><span class=p>:[</span><span class=nb>EBP</span><span class=o>+</span><span class=mi>8</span><span class=p>]</span>
<span class=nf>ADD</span>  <span class=nb>EAX</span><span class=p>,</span> <span class=kt>DWORD</span> <span class=nv>PTR</span> <span class=nb>SS</span><span class=p>:[</span><span class=nb>EBP</span><span class=o>+</span><span class=nv>C</span><span class=p>]</span>
<span class=c1>; 恢复现场</span>
<span class=nf>POP</span> <span class=nb>EDI</span>
<span class=nf>POP</span> <span class=nb>ESI</span>
<span class=nf>POP</span> <span class=nb>EBX</span>
<span class=c1>; 恢复栈桢</span>
<span class=nf>MOV</span> <span class=nb>ESP</span><span class=p>,</span> <span class=nb>EBP</span>
<span class=nf>POP</span> <span class=nb>EBP</span>
<span class=nf>RETN</span>            <span class=c1>; 返回</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-nasm data-lang=nasm><span class=c1>; 函数入口</span>
<span class=nf>PUSH</span> <span class=mi>2</span>         <span class=c1>; 将函数参数压入栈中</span>
<span class=nf>PUSH</span> <span class=mi>1</span>
<span class=nf>CALL</span> <span class=mi>0040100</span><span class=nv>A</span>  <span class=c1>; 调用函数</span>

<span class=c1>; 函数出口</span>
<span class=nf>MOV</span> <span class=nb>EAX</span><span class=p>,</span> <span class=kt>DWORD</span> <span class=nv>PTR</span> <span class=nb>SS</span><span class=p>:[</span><span class=nb>EBP</span><span class=o>+</span><span class=mi>8</span><span class=p>]</span>
<span class=nf>ADD</span> <span class=nb>EAX</span><span class=p>,</span> <span class=kt>DWORD</span> <span class=nv>PTR</span> <span class=nb>SS</span><span class=p>:[</span><span class=nb>EBP</span><span class=o>+</span><span class=nv>C</span><span class=p>]</span>
</code></pre></td></tr></table>
</div>
</div><h2 id=参考>参考</h2>
<ol>
<li>
<p><a href=https://www.jianshu.com/p/1782e14a0766>GCC内联汇编基础 - 简书</a></p>
</li>
<li>
<p><a href=http://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html>http://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html</a></p>
</li>
<li>
<p><a href=https://zhuanlan.zhihu.com/p/27339191>https://zhuanlan.zhihu.com/p/27339191</a></p>
</li>
<li>
<p><a href=https://chai2010.cn/advanced-go-programming-book/ch3-asm/ch3-02-arch.html>https://chai2010.cn/advanced-go-programming-book/ch3-asm/ch3-02-arch.html</a></p>
</li>
<li>
<p><a href=https://langzi989.github.io/2017/10/06/%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%8E%E7%AE%80%E5%8D%95%E6%8C%87%E4%BB%A4%E5%88%86%E6%9E%90/>https://langzi989.github.io/2017/10/06/%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%8E%E7%AE%80%E5%8D%95%E6%8C%87%E4%BB%A4%E5%88%86%E6%9E%90/</a></p>
</li>
<li>
<p><a href=https://zhuanlan.zhihu.com/p/54821702>https://zhuanlan.zhihu.com/p/54821702</a></p>
</li>
<li>
<p><a href=https://www.less-bug.com/posts/how-to-read-x86-assembly-att-version/>如何看懂 x86 汇编（AT&T 版）</a></p>
</li>
<li>
<p><a href=https://insidelinuxdev.net/article/a00eij.html>i386汇编指令初学</a></p>
</li>
<li>
<p><a href=http://150.158.21.50/2022/12/01/AT-T%E6%B1%87%E7%BC%96/>AT&T汇编 | Today is the present</a></p>
</li>
<li>
<p><a href=http://ref.x86asm.net/geek32-abc.html>http://ref.x86asm.net/geek32-abc.html</a></p>
</li>
<li>
<p><a href=https://zhuanlan.zhihu.com/p/139785404>汇编语言程序设计第二篇——80X86汇编语言伪指令</a></p>
</li>
<li>
<p><a href=https://code64.cn/blog1/2009/10-08/BF629617CAE2B0FF08CB38DCE94AA184/>AT&T 汇编伪指令说明 - 正弦公仔的知识库</a></p>
</li>
<li></li>
</ol>
</div>
<div class=post-copyright>
<p class=copyright-item>
<span class=item-title>文章作者</span>
<span class=item-content>Justice</span>
</p>
<p class=copyright-item>
<span class=item-title>上次更新</span>
<span class=item-content>
2024-01-05 22:16:21
</span>
</p>
<p class=copyright-item>
<span class=item-title>许可协议</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span>
</p>
</div>
<div class=post-reward>
<input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label>
<div class=qr-code>
<label class=qr-code-image for=reward>
<img class=image src=/image/wx_reward_qrcode.png>
<span>微信打赏</span>
</label>
<label class=qr-code-image for=reward>
<img class=image src=/image/alipay_reward_qrcode.png>
<span>支付宝打赏</span>
</label>
<label class=qr-code-image for=reward>
<img class=image src=/image/bitcoin_reward_qrcode.png>
<span>比特币打赏</span>
</label>
</div>
</div>
<footer class=post-footer>
<div class=post-tags>
<a href=https://justice.bj.cn/tags/language/>language</a>
<a href=https://justice.bj.cn/tags/asm/>asm</a>
</div>
<nav class=post-nav>
<a class=prev href=/post/21.linux/linux-0.11%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/%E7%AC%AC4%E9%83%A8%E5%88%86/%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86%E6%80%BB%E7%BB%93%E4%B8%8E%E5%9B%9E%E9%A1%BE/>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417l277.93508-310.326815c11.338233-12.190647 11.035334-32.285311-.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"/></svg>
</i>
<span class="prev-text nav-default">第4部分小结</span>
<span class="prev-text nav-mobile">上一篇</span>
</a>
<a class=next href=/post/21.linux/elf%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/>
<span class="next-text nav-default">ELF文件格式</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697c-11.777231-11.500939-30.216186-10.304694-41.178865 2.712784z"/></svg>
</i>
</a>
</nav>
</footer>
</article>
<div class="post bg-white">
<script src=https://utteranc.es/client.js repo=ZhuZhengyi/gh_comment issue-term=pathname theme=github-light crossorigin=anonymous async></script>
</div>
</div>
</div>
<div class=modal-dialog>
<div id=fastSearch>
<input id=searchInput tabindex=0>
<ul id=searchResults>
</ul>
</div>
</div>
</main>
<footer id=footer class=footer>
<div class=icon-links>
<a href=mailto:justice_103@126.com rel="me noopener" class=iconfont title=email><svg class="icon" viewBox="0 0 1451 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z"/></svg>
</a>
<a href=https://justice.bj.cn/index.xml rel="noopener alternate" type=application/rss+xml class=iconfont title=rss target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><path d="M819.157333 1024C819.157333 574.592 449.408 204.8.0 204.8V0c561.706667.0 1024 462.293333 1024 1024H819.157333zM140.416 743.04a140.8 140.8.0 01140.501333 140.586667A140.928 140.928.0 01140.074667 1024C62.72 1024 0 961.109333.0 883.626667S62.933333 743.082667 140.416 743.04zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667v-199.04c372.352.0 678.784 306.517333 678.784 678.826667z"/></svg>
</a>
</div>
<div class=copyright>
<span class=power-by>
Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span>
<span class=division>|</span>
<span class=theme-info>
Theme - <a class=theme-link href=https://github.com/xianmin/hugo-theme-jane>Jane</a>
</span>
<span class=copyright-year>
&copy;
2000 -
2024
<span class=heart>
<i class=iconfont><svg class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14"><path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7.0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1.0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2.0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3.1-42.5-8-83.6-24-122.2z" fill="#8a8a8a"/></svg>
</i>
</span><span class=author>
Justice
</span></span>
<span id=busuanzi_container>
访客数/访问量：<span id=busuanzi_value_site_uv></span>/<span id=busuanzi_value_site_pv></span>
</span>
</div>
</footer>
<div class=back-to-top id=back-to-top>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35"><path d="M510.866688 227.694839 95.449397 629.218702h235.761562L329.15309 958.01517h362.40389L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777h894.052392v131.813095H63.840492V63.962777zm0 0"/></svg>
</i>
</div>
</div>
<script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script>
<script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script>
<script type=text/javascript src=/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin=anonymous></script>
<script type=text/javascript>window.MathJax={showProcessingMessages:!1,messageStyle:'none'}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css integrity=sha384-BdGj8xC2eZkQaxoQ8nSLefg4AV4/AwB3Fj+8SUSo7pnKP6Eoy18liIKTPn9oBYNG crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.js integrity=sha384-JiKN5O8x9Hhs/UE5cT5AAJqieYlOZbGT3CHws/y97o3ty4R7/O5poG9F3JoiOYw1 crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{})})</script>
<script type=text/javascript src=/js/load-photoswipe.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe.min.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe-ui-default.min.js></script>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
$("#openSearch, #openSearchMobile").click(function(){
$(".modal-dialog").addClass("visible");
});
$("#closeSearch").click(function(){
$(".modal-dialog").removeClass("visible");
});
<script src=/js/fuse.min.js></script>
<script src=/js/fastsearch.js></script>
</body>
</html>