<!doctype html><html lang=zh-cn itemscope itemtype=http://schema.org/WebPage>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>Rust 数据类型 - Justice的小站</title>
<meta name=renderer content="webkit">
<meta name=referrer content="no-referrer">
<meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes">
<meta name=MobileOptimized content="width">
<meta name=HandheldFriendly content="true">
<meta name=applicable-device content="pc,mobile">
<meta name=theme-color content="#f8f5ec">
<meta name=msapplication-navbutton-color content="#f8f5ec">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec">
<meta name=mobile-web-app-capable content="yes">
<meta name=author content="Justice">
<meta name=description content="Rust 数据类型 简介 Rust 的数据分为 标量(scalar)、复合(compound)和 集合3 种类型： 类型写法 描述 值举例 i8, i16, i32, i64,&amp;lt;br&amp;gt;u8, u16, u32, u64 i:带符号 &amp;lt;b">
<meta name=keywords content="tech,it,blog">
<meta name=generator content="Hugo 0.88.1">
<link rel=canonical href=https://justice.bj.cn/post/14.language/rust/02.rust%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/>
<link rel=icon href=/favicon.ico>
<link rel=stylesheet href=/sass/jane.min.34a0cf3583dc0fd6b4e3fe24a36c076984feee75ebc2792cff33928ccdcfc628.css integrity="sha256-NKDPNYPcD9a04/4ko2wHaYT+7nXrwnks/zOSjM3Pxig=" media=screen crossorigin=anonymous>
<meta property="og:title" content="Rust 数据类型">
<meta property="og:description" content="Rust 数据类型 简介 Rust 的数据分为 标量(scalar)、复合(compound)和 集合3 种类型： 类型写法 描述 值举例 i8, i16, i32, i64,<br>u8, u16, u32, u64 i:带符号 <b">
<meta property="og:type" content="article">
<meta property="og:url" content="https://justice.bj.cn/post/14.language/rust/02.rust%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2024-03-07T11:58:54+08:00">
<meta property="article:modified_time" content="2024-03-07T11:58:54+08:00"><meta property="og:site_name" content="Justice的小站">
<meta itemprop=name content="Rust 数据类型">
<meta itemprop=description content="Rust 数据类型 简介 Rust 的数据分为 标量(scalar)、复合(compound)和 集合3 种类型： 类型写法 描述 值举例 i8, i16, i32, i64,<br>u8, u16, u32, u64 i:带符号 <b"><meta itemprop=datePublished content="2024-03-07T11:58:54+08:00">
<meta itemprop=dateModified content="2024-03-07T11:58:54+08:00">
<meta itemprop=wordCount content="8695">
<meta itemprop=keywords content="language,rust,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Rust 数据类型">
<meta name=twitter:description content="Rust 数据类型 简介 Rust 的数据分为 标量(scalar)、复合(compound)和 集合3 种类型： 类型写法 描述 值举例 i8, i16, i32, i64,<br>u8, u16, u32, u64 i:带符号 <b"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<div id=mobile-navbar class=mobile-navbar>
<div class=mobile-header-logo>
<a href=/ class=logo>Justice's Blog</a>
</div>
<div class=mobile-navbar-icon>
<span></span>
<span></span>
<span></span>
</div>
</div>
<nav id=mobile-menu class="mobile-menu slideout-menu">
<ul class=mobile-menu-list>
<li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/>主页</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/post/>点滴</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/tags/>标签</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/categories/>分类</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=http://passer-by.com/pacman/ rel=noopener target=_blank>
更多
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6 21.568 21.632 54.144 54.208 54.144 54.208C534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92.0.0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"/><path d="M841.152 457.152c-30.528.0-54.784 24.512-54.784 54.656V786.56H237.696V237.696h206.016c6.656.0 10.752.0 13.248.0 30.72.0 55.04-24.512 55.04-54.848C512 152.32 487.36 128 456.96 128H183.04C153.216 128 128 152.576 128 182.848c0 3.136.256 6.272.768 9.28C128.256 195.136 128 198.272 128 201.408v639.488c0 .064.0.192.0.256.0.128.0.192.0.32.0 30.528 24.512 54.784 54.784 54.784H829.76c6.592.0 9.728.0 11.712.0 28.736.0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344v-20.352V561.408v-49.28C896 481.792 871.424 457.152 841.152 457.152z"/></svg>
</i>
</a>
</li>
</ul>
</nav>
<link rel=stylesheet href=/lib/photoswipe/photoswipe.min.css>
<link rel=stylesheet href=/lib/photoswipe/default-skin/default-skin.min.css>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div>
<div class=modal-dialog>
<div class=modal-content>
<div id=fastSearch>
<input id=searchInput tabindex=0>
<ul id=searchResults>
</ul>
</div>
</div>
</div>
<header id=header class="header container">
<div class=logo-wrapper>
<a href=/ class=logo>
Justice's Blog
</a>
</div>
<nav class=site-navbar>
<ul id=menu class=menu>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/>主页</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/post/>点滴</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/tags/>标签</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/categories/>分类</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=http://passer-by.com/pacman/ rel=noopener target=_blank>
更多
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6 21.568 21.632 54.144 54.208 54.144 54.208C534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92.0.0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"/><path d="M841.152 457.152c-30.528.0-54.784 24.512-54.784 54.656V786.56H237.696V237.696h206.016c6.656.0 10.752.0 13.248.0 30.72.0 55.04-24.512 55.04-54.848C512 152.32 487.36 128 456.96 128H183.04C153.216 128 128 152.576 128 182.848c0 3.136.256 6.272.768 9.28C128.256 195.136 128 198.272 128 201.408v639.488c0 .064.0.192.0.256.0.128.0.192.0.32.0 30.528 24.512 54.784 54.784 54.784H829.76c6.592.0 9.728.0 11.712.0 28.736.0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344v-20.352V561.408v-49.28C896 481.792 871.424 457.152 841.152 457.152z"/></svg>
</i>
</a>
</li>
<li class=menu-item>
<a id=search-btn class="menu-item-link menu-item-search" href=#>
<i class=iconfont><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="18" height="18" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M973.81454219 973.81454219a91.78207815 91.78207815.0 01-129.80999631.0L682.0297247 811.83972101a425.48527711 425.48527711.0 01-230.35931791 68.16531768 428.3346319 428.3346319.0 11428.3346319-428.3346319A425.48527711 425.48527711.0 01811.83972101 682.0297247l162.02961656 161.97482118a91.83687354 91.83687354.0 01-.05479538 129.80999631zm-522.1441354-828.1209266a305.97679241 305.97679241.0 100 611.95358361 305.97679241 305.97679241.0 000-611.95358361z"/></svg>
</i>
</a>
</li>
</ul>
</nav>
</header>
<div id=mobile-panel>
<main id=main class="main bg-llight">
<div class=content-wrapper>
<div id=content class="content container">
<article class="post bg-white">
<header class=post-header>
<h1 class=post-title>Rust 数据类型</h1>
<div class=post-meta>
<time datetime=2024-03-07 class=post-time>
2024-03-07 11:58:54
</time>
<div class=post-category>
<a href=https://justice.bj.cn/categories/language/> language </a>
<a href=https://justice.bj.cn/categories/rust/> rust </a>
</div>
<span id=busuanzi_container_page_pv>
| 阅读 <span id=busuanzi_value_page_pv></span>
</span>
</div>
</header>
<div class=post-toc id=post-toc>
<h2 class=post-toc-title>文章目录</h2>
<div class=post-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#简介>简介</a></li>
<li><a href=#标量类型scalar>标量类型(scalar)</a>
<ul>
<li><a href=#布尔类型bool>布尔类型(bool)</a></li>
<li><a href=#数值类型numeric>数值类型(numeric)</a></li>
<li><a href=#位运算>位运算</a></li>
<li><a href=#byte-字面量>byte 字面量</a></li>
<li><a href=#字符char>字符(char)</a></li>
</ul>
</li>
<li><a href=#复合类型>复合类型</a>
<ul>
<li><a href=#元组tuple>元组(Tuple)</a></li>
<li><a href=#结构体struct>结构体(Struct)</a></li>
<li><a href=#枚举enum>枚举(Enum)</a></li>
<li><a href=#联合体union>联合体(Union)</a></li>
</ul>
</li>
<li><a href=#集合类型>集合类型</a>
<ul>
<li><a href=#数组array>数组(Array)</a></li>
<li><a href=#向量vector>向量(Vector)</a></li>
<li><a href=#切片slice>切片(Slice)</a></li>
<li><a href=#范围range>范围(Range)</a></li>
</ul>
</li>
<li><a href=#常用数据类型>常用数据类型</a>
<ul>
<li><a href=#字符串>字符串</a></li>
<li><a href=#哈希表hashmap>哈希表(HashMap)</a></li>
<li><a href=#有序映射btreemap>有序映射(BTreeMap)</a></li>
<li><a href=#有序集合btreeset>有序集合(BTreeSet)</a></li>
<li><a href=#双端队列vecdeque>双端队列(VecDeque)</a></li>
<li><a href=#二叉堆优先队列binaryheap>二叉堆/优先队列(BinaryHeap)</a></li>
</ul>
</li>
<li><a href=#高级类型>高级类型</a>
<ul>
<li><a href=#类型别名>类型别名</a></li>
<li><a href=#never-type>never type</a></li>
<li><a href=#dyn>dyn</a></li>
<li><a href=#sized>sized</a></li>
</ul>
</li>
<li><a href=#参考>参考</a></li>
</ul>
</nav>
</div>
</div>
<div class=post-content>
<h1 id=rust-数据类型>Rust 数据类型</h1>
<h2 id=简介>简介</h2>
<p>Rust 的数据分为 <code>标量(scalar)</code>、<code>复合(compound)</code>和 <code>集合</code>3 种类型：</p>
<table>
<thead>
<tr>
<th><strong>类型写法</strong></th>
<th><strong>描述</strong></th>
<th><strong>值举例</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>i8, i16, i32, i64,<code>&lt;br></code>u8, u16, u32, u64</td>
<td>i:带符号 <code>&lt;br></code>u:无符号 <code>&lt;br></code>数字代表存储位数</td>
<td>42,<code>&lt;br></code>-5i8, 0x400u16, 0o100i16,<code>&lt;br></code>20_922_789_888_000u64,<code>&lt;br></code>b'*' (u8 byte literal)</td>
</tr>
<tr>
<td>isize, usize</td>
<td>带符号/无符号 整型 <code>&lt;br></code>存储位数与系统位数相同 <code>&lt;br></code>(32 或 64 位整数)</td>
<td>137,<code>&lt;br></code>-0b0101_0010isize,<code>&lt;br></code>0xffff_fc00usize</td>
</tr>
<tr>
<td>f32, f64</td>
<td>IEEE 标准的浮点数，单精度/双精度</td>
<td>1.61803, 3.14f32,<code>&lt;br></code>6.0221e23f64</td>
</tr>
<tr>
<td>bool</td>
<td>布尔型</td>
<td>true, false</td>
</tr>
<tr>
<td>char</td>
<td>Unicode 字符 <code>&lt;br></code>存储空间固定为 4 字符</td>
<td>&lsquo;*&rsquo;, &lsquo;\n&rsquo;, &lsquo;字&rsquo;, &lsquo;\x7f&rsquo;, &lsquo;\u{CA0}&rsquo;</td>
</tr>
<tr>
<td>(char, u8, i32)</td>
<td>元组 tuple：可以存储多种类型</td>
<td>('%', 0x7f, -1)</td>
</tr>
<tr>
<td>()</td>
<td>单元类型，实际上是空 tuple</td>
<td>()</td>
</tr>
<tr>
<td>struct S{x: f32, y: f32 }</td>
<td>命名元素结构体，数据成员有变量名的结构体</td>
<td>struct S { x: 120.0, y: 209.0 }</td>
</tr>
<tr>
<td>struct T(i32, char)</td>
<td>元组结构体，数据成员无名称，形如元组，不可与元组混淆</td>
<td>struct T(120, &lsquo;X&rsquo;)</td>
</tr>
<tr>
<td>struct E</td>
<td>单元型结构体，没有数据成员</td>
<td>E</td>
</tr>
<tr>
<td>enum Attend {<code>&lt;br></code>OnTime, Late(u32)<code>&lt;br></code>}</td>
<td>枚举类型，枚举类型默认没有比较是否相等的运算，更没有比较大小</td>
<td>Attend::Late(5),<code>&lt;br></code>Attend::OnTime</td>
</tr>
<tr>
<td>Box <code>&lt;Attend></code></td>
<td>Box 指针类型，指向堆内存中的一个泛型值</td>
<td>Box::new(Late(15))</td>
</tr>
<tr>
<td>&i32, &mut i32</td>
<td>只读引用和可变引用，物所有权，生命周期不能超过所指向的值。<code>&lt;br></code>只读引用也叫共享引用，</td>
<td>&s.y, &mut v</td>
</tr>
<tr>
<td>String</td>
<td>字符串，UTF-8 格式存储，长度可变</td>
<td>&ldquo;编程&rdquo;.to_string()<code>&lt;br></code>to_string 函数返回一个字符串类型</td>
</tr>
<tr>
<td>&str</td>
<td>str 的引用，指向 UTF-8 文本的指针，无所有权</td>
<td>&ldquo;そば: soba&rdquo;, &s[0..12]</td>
</tr>
<tr>
<td>[f64; 4], [u8; 256]</td>
<td>数组，固定长度，内部数据类型必须一致</td>
<td>[1.0, 0.0, 0.0, 1.0],<code>&lt;br></code>[b' &lsquo;; 256]</td>
</tr>
<tr>
<td>Vec <code>&lt;f64></code></td>
<td>Vector 向量，可变长度，内部数据类型必须一致</td>
<td>vec![0.367, 2.718, 7.389]</td>
</tr>
<tr>
<td>&[u8..u8],<code>&lt;br></code>&mut [u8..u8]</td>
<td>切片引用，通过起始索引和长度指向数组或向量的一部分连续元素</td>
<td>&v[10..20], &mut a[..]</td>
</tr>
<tr>
<td>&Any, &mut Read</td>
<td>traid 对象：实现了某 trait 内方法的对象 <code>&lt;br></code>示例中 Any、Read 都是 trait</td>
<td>value as &Any,<code>&lt;br></code>&mut file as &mut Read</td>
</tr>
<tr>
<td>fn(&str, usize) -><code>&lt;br></code>isize</td>
<td>函数类型，可以理解为函数指针</td>
<td>i32::saturating_add</td>
</tr>
<tr>
<td>闭包</td>
<td>闭包</td>
<td>|a, b| a<em>a + b</em>b</td>
</tr>
</tbody>
</table>
<p>上表中没有 byte 类型，是因为 Rust 压根就没有 byte 类型，实际上等于 u8，在一般计算中认为是 u8，</p>
<p>在文件或网络中读写数据时经常称为 byte 流。</p>
<h2 id=标量类型scalar>标量类型(scalar)</h2>
<p>标量类型表示一个单独的值，包括：</p>
<ul>
<li><strong>布尔类型(bool)</strong></li>
<li><strong>数值(numeir)</strong></li>
<li><strong>字符 (char)</strong></li>
</ul>
<h3 id=布尔类型bool>布尔类型(bool)</h3>
<ul>
<li>bool 类型占一个 byte, 从而允许指针指向其地址；</li>
<li>bool 型取值: <code>true</code>, <code>false</code>；</li>
<li><code>as</code>运算符可以将 bool 值转换为整数类型，false -> 0，true 转换为 1；</li>
<li><code>as</code>不会从数值类型转换为 bool</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=kd>let</span><span class=w> </span><span class=n>b1</span>: <span class=kt>bool</span> <span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>b2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>!</span><span class=n>b1</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>b3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b1</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>u8</span><span class=p>;</span><span class=w>     </span><span class=c1>// bool -&gt; u8
</span><span class=c1>// let b = i as bool  // u8 -&gt; bool 非法
</span><span class=c1></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{} {} {}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>b1</span><span class=p>,</span><span class=w> </span><span class=n>b2</span><span class=p>,</span><span class=w> </span><span class=n>b3</span><span class=p>);</span><span class=w>    </span><span class=c1>//true, false, true
</span></code></pre></td></tr></table>
</div>
</div><h3 id=数值类型numeric>数值类型(numeric)</h3>
<ul>
<li>不允许隐式转换；</li>
<li>如果需要调用类型的方法, 在有二意的情况下必须显式转换, 例如加后缀: <code>(2.0_f64).sqrt()</code>；</li>
<li><code>bool</code>, <code>char</code>, <code>enum</code> 可以转换为任意整型 <code>integer</code>, 但反向转换不行, 唯一例外是 <code>u8</code>转 <code>char</code>；</li>
<li>有符号整形： <code>i8, i16, i32, i64</code>;</li>
<li>无符号整形： <code>u8, u16, u32, u64</code>;</li>
<li>带符号/无符号整型, 存储位数与系统位数相同： <code>isize, usize</code>;</li>
<li>单/双精度浮点型： <code>f32, f64</code>；</li>
<li>带符号整型，使用最高一位（bit）表示为符号，0 为正数，1 为负数，其他位是数值，用补码表示；</li>
<li>Rust 要求数组的索引必须是 usize 类型，在一些数据结构中，数组和向量的元素数也是 usize 型；</li>
<li>数值类型可以通过 <code>as</code>运算符进行转换；</li>
<li><code>as</code>运算符在转换时，对存储的数字并不改动，只是把数读出来的时候进行截取、扩展、或决定是否采用补码翻译；</li>
<li>f32 和 f64 类型都定义了一些特殊值常量： INFINITY（无穷大）、 NEG_INFINITY (负无穷)、NAN (非数字)、MIN（最小值）、MAX (最大值)。std::f32::consts 和 std::f64::consts 模块定义了一些常量：E（自然对数）、PI（圆周率）、SQRT_2（2 的平方根）等等。</li>
</ul>
<p>各整数类型的取值范围：</p>
<ul>
<li>u8：    [0, 2^8 –1] (0 ~ 255)</li>
<li>u16： [0, 2^16-1] (0 ~ 65,535)</li>
<li>u32： [0, 2^32-1] (0 ~ 4,294,967,295)</li>
<li>u64： [0, 2^64-1] (0 ~ 18,446,744,073,709,551,615，约 1.8 千亿亿)</li>
<li>i8：　 [−2^7, 2^7 −1] (−128 ~ 127)</li>
<li>i16：　[−2^15, 2^15 −1] (−32,768 ~ 32,767)</li>
<li>i32：　[−2^31, 2^31 −1] (−2,147,483,648 ~ 2,147,483,647)</li>
<li>i64：　[−2^63 , 2^63 −1] (−9,223,372,036,854,775,808 ~ 9,223,372,036,854,775,807)</li>
<li>usize：[0,2^32 −1] (32 位系统) 或 [0, 2^64 −1] (64 位系统)</li>
<li>isize：　 −2^31  至 2^31 −1, or −2^63  至 2^63 −1</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=c1>// int
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>big_val</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span>::<span class=kt>i32</span>::<span class=n>MAX</span><span class=p>;</span><span class=w> </span><span class=c1>//MAX 是std::i32中定义的常量，表示i32型的最大值，即231-1
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>neg_inf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span>::<span class=kt>f32</span>::<span class=n>NEG_INFINITY</span><span class=p>;</span><span class=w> </span><span class=c1>//负无穷大；
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>big_val</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>         </span><span class=c1>// 发生异常 panic: arithmetic operation overflowed
</span><span class=c1>// 整形进制
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>u07</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mh>0xFF_</span><span class=k>u32</span><span class=p>;</span><span class=w>          </span><span class=c1>//0x 16进制
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>u08</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mo>0o7777_</span><span class=k>u32</span><span class=p>;</span><span class=w>        </span><span class=c1>//0o 8进制
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>u09</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mb>0b01_10_00_</span><span class=k>u8</span><span class=p>;</span><span class=w>     </span><span class=c1>//0b 2进制
</span><span class=c1></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{} {} {}&#34;</span><span class=p>,</span><span class=n>u07</span><span class=p>,</span><span class=n>u08</span><span class=p>,</span><span class=n>u09</span><span class=p>);</span><span class=w>    </span><span class=c1>//255 4095 24
</span><span class=c1>// as
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=w>  </span><span class=mi>10_</span><span class=k>i8</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>u16</span><span class=p>,</span><span class=w>    </span><span class=mi>10_</span><span class=k>u16</span><span class=p>);</span><span class=w> </span><span class=c1>// 正数值由少位数转入多位数
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=w> </span><span class=mi>2525_</span><span class=k>u16</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>i16</span><span class=p>,</span><span class=w> </span><span class=mi>2525_</span><span class=k>i16</span><span class=p>);</span><span class=w> </span><span class=c1>// 正数值同位数转换
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=w>  </span><span class=o>-</span><span class=mi>1_</span><span class=k>i16</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>i32</span><span class=p>,</span><span class=w>    </span><span class=o>-</span><span class=mi>1_</span><span class=k>i32</span><span class=p>);</span><span class=w> </span><span class=c1>// 负数少位转多位执行符号位扩展
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=mi>65535_</span><span class=k>u16</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>i32</span><span class=p>,</span><span class=w> </span><span class=mi>65535_</span><span class=k>i32</span><span class=p>);</span><span class=w> </span><span class=c1>// 正数少位转多位执行0位扩展（也可以理解为符号位扩展）
</span><span class=c1>//由多位数转少位数，会截掉多位数的高位，相当于多位数除以2^N的取模，其中N是少位数的位数
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=w> </span><span class=mi>1000_</span><span class=k>i16</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=mi>232_</span><span class=k>u8</span><span class=p>);</span><span class=w> </span><span class=c1>//1000的二进制是0000 0011 1110 1000，截掉左侧8位，留下右侧8位，是232
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=mi>65535_</span><span class=k>u32</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>i16</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1_</span><span class=k>i16</span><span class=p>);</span><span class=w> </span><span class=c1>//65535的二进制,16个0和16个1，截掉高位的16个0，剩下的全是1，全1的有符号补码是-1
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>//同位数的带符号和无符号相互转化，存储的数字并不动，只是解释的方法不一样
</span><span class=c1>//无符号数，就是这个值；而有符号数，需要用补码来翻译
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=o>-</span><span class=mi>1_</span><span class=k>i8</span><span class=w>  </span><span class=k>as</span><span class=w> </span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=mi>255_</span><span class=k>u8</span><span class=p>);</span><span class=w>  </span><span class=c1>//有符号转无符号
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=mi>255_</span><span class=k>u8</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>i8</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1_</span><span class=k>i8</span><span class=p>);</span><span class=w>  </span><span class=c1>//无符号转有符号
</span><span class=c1>// float
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=mi>5</span><span class=k>f32</span><span class=p>.</span><span class=n>sqrt</span><span class=p>()</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>5</span><span class=k>f32</span><span class=p>.</span><span class=n>sqrt</span><span class=p>(),</span><span class=w> </span><span class=mf>5.</span><span class=p>);</span><span class=w> </span><span class=c1>// 平方根，此外还有sin()、ln()等诸多数学计算方法
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=o>-</span><span class=mf>3.7</span><span class=k>f64</span><span class=p>.</span><span class=n>floor</span><span class=p>(),</span><span class=w>  </span><span class=o>-</span><span class=mf>4.0</span><span class=p>);</span><span class=w>  </span><span class=c1>//向下取整，还有ceil()方法是向上取整，round()方法是四舍五入）
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=mf>1.2</span><span class=k>f32</span><span class=p>.</span><span class=n>max</span><span class=p>(</span><span class=mf>2.2</span><span class=p>),</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>);</span><span class=w> </span><span class=c1>//比较返回最大值，min()方法是取最小值
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=o>-</span><span class=mf>3.7</span><span class=k>f64</span><span class=p>.</span><span class=n>trunc</span><span class=p>(),</span><span class=w> </span><span class=o>-</span><span class=mf>3.0</span><span class=p>);</span><span class=w>  </span><span class=c1>//删除小数部分，注意和floor、ceil的区别
</span><span class=c1></span><span class=n>assert</span><span class=o>!</span><span class=p>((</span><span class=o>-</span><span class=mf>1.</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>std</span>::<span class=kt>f32</span>::<span class=n>INFINITY</span><span class=p>).</span><span class=n>is_sign_negative</span><span class=p>());</span><span class=w> </span><span class=c1>//是否为负值，注意-0.0也算负值
</span></code></pre></td></tr></table>
</div>
</div><h3 id=位运算>位运算</h3>
<table>
<thead>
<tr>
<th style=text-align:left>名字</th>
<th style=text-align:left>运算符</th>
<th style=text-align:left>说明</th>
<th style=text-align:left>范例</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:left>位与</td>
<td style=text-align:left>&</td>
<td style=text-align:left>相同位都是 1 则返回 1 否则返回 0</td>
<td style=text-align:left>A & B ==<code>2</code></td>
</tr>
<tr>
<td style=text-align:left>位或</td>
<td style=text-align:left>|</td>
<td style=text-align:left>相同位只要有一个是 1 则返回 1 否则返回 0</td>
<td style=text-align:left>A|B = 3</td>
</tr>
<tr>
<td style=text-align:left>异或</td>
<td style=text-align:left>^</td>
<td style=text-align:left>相同位不相同则返回 1 否则返回 0</td>
<td style=text-align:left>A ^ B = 1</td>
</tr>
<tr>
<td style=text-align:left>位非</td>
<td style=text-align:left>!</td>
<td style=text-align:left>把位中的 1 换成 0 ， 0 换成 1</td>
<td style=text-align:left>(!B) 结果 -4</td>
</tr>
<tr>
<td style=text-align:left>左移</td>
<td style=text-align:left>&#171;</td>
<td style=text-align:left>操作数中的所有位向左移动指定位数，右边的位补 0</td>
<td style=text-align:left>(A &#171; 1) 结果为 4</td>
</tr>
<tr>
<td style=text-align:left>右移</td>
<td style=text-align:left>&#187;</td>
<td style=text-align:left>操作数中的所有位向右移动指定位数，左边的位补 0</td>
<td style=text-align:left>(A &#187; 1) 结果为 1</td>
</tr>
</tbody>
</table>
<h3 id=byte-字面量>byte 字面量</h3>
<ul>
<li>Rust 没有 byte 类型，u8 类型相当于 byte 类型;</li>
<li>byte 字面量，表示 ASCII 字符；</li>
<li>书写方式: <code>b'x'</code>，b 表示是 byte；</li>
</ul>
<table>
<thead>
<tr>
<th>ASCII 字符</th>
<th>byte 字面量的书写</th>
<th>相当于的数值</th>
</tr>
</thead>
<tbody>
<tr>
<td>单引号   '</td>
<td>b&rsquo;''</td>
<td>39_u8</td>
</tr>
<tr>
<td>反斜杠 \</td>
<td>b'\'</td>
<td>92_u8</td>
</tr>
<tr>
<td>换行</td>
<td>b'\n'</td>
<td>10_u8</td>
</tr>
<tr>
<td>回车</td>
<td>b'\r'</td>
<td>13_u8</td>
</tr>
<tr>
<td>制表符 Tab</td>
<td>b'\t'</td>
<td>9_u8</td>
</tr>
</tbody>
</table>
<h3 id=字符char>字符(char)</h3>
<ul>
<li>Rust 的 char 表示一个 Unicode 字符；</li>
<li>每个 char 固定为 4 个 byte，32bit；</li>
<li>UNICODE 编码;</li>
<li>char 不能和任何其他类型之间进行隐式转换;</li>
<li>使用 <code>as</code>运算符将 char 转换为整数类型；</li>
<li>对于小于 32 位的类型，字符值的高位将被截断：</li>
<li>只有 u8 能用 as 转换为 char。</li>
<li>如果想用 u32 位转换为 char，可以用 std 库里的 <code>std::char::from_u32()</code>函数，返回值是 <code>Option&lt;char></code>类型</li>
<li>char 类型的书写是用单引号引起来，字符串是用双引号引起来：</li>
<li>char 类型的值包含范围为 0x0000 到 0xD7FF 或 0xE000 到 0x10FFFF 的 Unicode 码位。</li>
<li>对于其他数值，Rust 会认为是无效的 char 类型，出现编译异常。</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=sc>&#39;*&#39;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>i32</span><span class=p>,</span><span class=w> </span><span class=mi>42</span><span class=p>);</span><span class=w>    </span><span class=c1>// char -&gt; i32
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=sc>&#39;ಠ&#39;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>u16</span><span class=p>,</span><span class=w> </span><span class=mh>0xca0</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=sc>&#39;ಠ&#39;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>i8</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mh>0x60</span><span class=p>);</span><span class=w> </span><span class=c1>// U+0CA0 被截断为8位带符号整型
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>//std::char模块中有很多有用的char方法/函数：
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=sc>&#39;*&#39;</span><span class=p>.</span><span class=n>is_alphabetic</span><span class=p>(),</span><span class=w> </span><span class=kc>false</span><span class=p>);</span><span class=w>  </span><span class=c1>//检查是否是字母
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=sc>&#39;β&#39;</span><span class=p>.</span><span class=n>is_alphabetic</span><span class=p>(),</span><span class=w> </span><span class=kc>true</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=sc>&#39;8&#39;</span><span class=p>.</span><span class=n>to_digit</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span><span class=w>  </span><span class=nb>Some</span><span class=p>(</span><span class=mi>8</span><span class=p>));</span><span class=w>  </span><span class=c1>//检查是否数字
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=sc>&#39;ಠ&#39;</span><span class=p>.</span><span class=n>len_utf8</span><span class=p>(),</span><span class=w> </span><span class=mi>3</span><span class=p>);</span><span class=w>  </span><span class=c1>//用utf-8格式表示的话，占据几个字节
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=n>std</span>::<span class=n>char</span>::<span class=n>from_digit</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w>  </span><span class=mi>10</span><span class=p>),</span><span class=w> </span><span class=nb>Some</span><span class=p>(</span><span class=sc>&#39;2&#39;</span><span class=p>));</span><span class=w>  </span><span class=c1>//数字转换为char，第二个参数是进制
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>// char -&gt; Integer
</span><span class=c1></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=sc>&#39;我&#39;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>i32</span><span class=p>);</span><span class=w>     </span><span class=c1>// 25105
</span><span class=c1></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=sc>&#39;是&#39;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>u16</span><span class=p>);</span><span class=w>     </span><span class=c1>// 26159
</span><span class=c1></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=sc>&#39;是&#39;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>u8</span><span class=p>);</span><span class=w>      </span><span class=c1>// 47，被截断了
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>// u8 -&gt; char
</span><span class=c1></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=mi>97_</span><span class=k>u8</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>char</span><span class=p>);</span><span class=w>    </span><span class=c1>// &#39;a&#39;
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>// std::char
</span><span class=c1></span><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>char</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// digit -&gt; char
</span><span class=c1></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>char</span>::<span class=n>from_u32</span><span class=p>(</span><span class=mh>0x2764</span><span class=p>).</span><span class=n>unwrap</span><span class=p>());</span><span class=w>  </span><span class=c1>// ❤
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=n>char</span>::<span class=n>from_u32</span><span class=p>(</span><span class=mh>0x110000</span><span class=p>),</span><span class=w> </span><span class=nb>None</span><span class=p>);</span><span class=w>  </span><span class=c1>// true
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>char</span>::<span class=n>from_digit</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=mi>10</span><span class=p>).</span><span class=n>unwrap</span><span class=p>());</span><span class=w>  </span><span class=c1>// &#39;4&#39;
</span><span class=c1></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>char</span>::<span class=n>from_digit</span><span class=p>(</span><span class=mi>11</span><span class=p>,</span><span class=mi>16</span><span class=p>).</span><span class=n>unwrap</span><span class=p>());</span><span class=w> </span><span class=c1>// &#39;b&#39;
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=n>char</span>::<span class=n>from_digit</span><span class=p>(</span><span class=mi>11</span><span class=p>,</span><span class=mi>10</span><span class=p>),</span><span class=nb>None</span><span class=p>);</span><span class=w> </span><span class=c1>// true
</span></code></pre></td></tr></table>
</div>
</div><p>char 类型与 byte 字面量，String 类型区别：</p>
<ul>
<li><code>'C'</code>: char 类型，在 stack 上开辟 4 字节空间，把字母 C 的 Unicode 码 <code>0x 00 00 00 43</code>存入；</li>
<li><code>b'C'</code>：byte 型，在 stack 上开辟 1 字节空间，把字母 C 的 ASCII 码 <code>0x43</code>存入；</li>
<li><code>"C"</code>：String, 在 heap 内存上开辟 N 字节空间（N 一般是字母 C 的字节数 1），然后在 stack 内存上开辟 12 字节空间（此处以 32 位平台为例）:
<ul>
<li>4 个字节存放堆内存放置数据的指针，</li>
<li>4 个字节存放字符串在内存中开辟的空间 N；</li>
<li>4 个字节存放字符串当前使用的空间；</li>
</ul>
</li>
</ul>
<h2 id=复合类型>复合类型</h2>
<p>复合(compound)类型由多个值组合而成。复合类型包括：</p>
<ul>
<li><code>Tuple</code>: 多个类型的值组合进一个类型;</li>
<li><code>Struct</code>:</li>
<li><code>Enum</code>: 多种数值中的一种;</li>
<li><code>Union</code>:</li>
</ul>
<h3 id=元组tuple>元组(Tuple)</h3>
<p>元组是一个将多个其他类型的值组合进一个复合类型的主要方式。</p>
<ul>
<li>包含在 <code>()</code>中的 <code>,</code>分隔的值列表 <code>(T1, T2, ...)</code>；</li>
<li>元组长度固定，长度不会增大或缩小；</li>
<li>元组分配在栈空间；</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=c1>// 元组定义
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>tup1</span>: <span class=p>(</span><span class=kt>i32</span><span class=p>,</span><span class=w> </span><span class=kt>f64</span><span class=p>,</span><span class=w> </span><span class=kt>u8</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=mi>500</span><span class=p>,</span><span class=w> </span><span class=mf>6.4</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>tup2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=mi>500</span><span class=p>,</span><span class=w> </span><span class=mf>6.4</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=c1>// 元组解构
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=n>z</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tup1</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=c1>// 索引访问
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>five_hundred</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tup2</span><span class=p>.</span><span class=mi>0</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>six_point_four</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tup2</span><span class=p>.</span><span class=mi>1</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>one</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tup3</span><span class=p>.</span><span class=mi>2</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h3 id=结构体struct>结构体(Struct)</h3>
<p>Rust 中的结构体</p>
<p>Rust 提供了 3 种结构体：</p>
<ul>
<li><strong>具名结构体</strong>：结构体的每个字段拥有名称；</li>
<li><strong>元组结构体</strong>: 结构体的字段没有名称；</li>
<li><strong>单元结构体</strong>: 结构体不包含任何字段；</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>struct</span> <span class=nc>Point</span><span class=w> </span><span class=p>{</span><span class=n>x</span>: <span class=kt>f32</span><span class=p>,</span><span class=w>  </span><span class=n>y</span>: <span class=kt>f32</span><span class=p>,</span><span class=w> </span><span class=p>}</span><span class=w>  </span><span class=c1>// 具名结构体
</span><span class=c1></span><span class=k>struct</span> <span class=nc>Color</span><span class=p>(</span><span class=kt>i32</span><span class=p>,</span><span class=w> </span><span class=kt>i32</span><span class=p>,</span><span class=w> </span><span class=kt>i32</span><span class=p>);</span><span class=w>  </span><span class=c1>// 元组结构体
</span><span class=c1></span><span class=k>struct</span> <span class=nc>Integer</span><span class=p>(</span><span class=kt>u32</span><span class=p>);</span><span class=w>          </span><span class=c1>// 元组结构体只有一个字段时，称为NewType模式
</span><span class=c1></span><span class=k>struct</span> <span class=nc>Nil</span><span class=p>;</span><span class=w>                   </span><span class=c1>// 单元结构体，没有任何字段的结构体。单元结构体实例就是其本身。
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>// 结构体实例化
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>point</span>: <span class=nc>Point</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Point</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>x</span>: <span class=mf>0.3</span><span class=p>,</span><span class=w> </span><span class=n>y</span>: <span class=mf>0.4</span><span class=w> </span><span class=p>};</span><span class=w>
</span><span class=w></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;point coordinates: ({},{})&#34;</span><span class=p>,</span><span class=w> </span><span class=n>point</span><span class=p>.</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>point</span><span class=p>.</span><span class=n>y</span><span class=p>);</span><span class=w> </span><span class=c1>// 访问 point 的字段
</span><span class=c1>// let解绑struct
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>Point</span><span class=w> </span><span class=p>{</span><span class=n>x</span>: <span class=nc>my_x</span><span class=p>,</span><span class=w> </span><span class=n>y</span>: <span class=nc>my_y</span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>point</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// struct tuple
</span><span class=c1></span><span class=k>struct</span> <span class=nc>Pair</span><span class=p>(</span><span class=kt>i32</span><span class=p>,</span><span class=w> </span><span class=kt>f32</span><span class=p>);</span><span class=w>  </span><span class=c1>//struct tuple
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>pair</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Pair</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mf>0.1</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;pair contains {:?} and {:?}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>pair</span><span class=p>.</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>pair</span><span class=p>.</span><span class=mi>1</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>Pair</span><span class=p>(</span><span class=n>integer</span><span class=p>,</span><span class=w> </span><span class=n>decimal</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>pair</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;pair contains {:?} and {:?}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>integer</span><span class=p>,</span><span class=w> </span><span class=n>decimal</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h3 id=枚举enum>枚举(Enum)</h3>
<ul>
<li><code>enum</code>用于表示多种可能数值中的一种；</li>
<li><code>enum</code>的多个值共用一个存储空间；</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=c1>// 不带参数枚举
</span><span class=c1></span><span class=k>enum</span> <span class=nc>Number</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>Zero</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>One</span><span class=p>,</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// 带参数枚举
</span><span class=c1></span><span class=k>enum</span> <span class=nc>IpAddr</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>V4</span><span class=p>(</span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=kt>u8</span><span class=p>),</span><span class=w>
</span><span class=w>    </span><span class=n>V6</span><span class=p>(</span><span class=nb>String</span><span class=p>),</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>enum</span> <span class=nc>MyEnum</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>Foo</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>Bar</span><span class=p>,</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// enum 格式化输出
</span><span class=c1></span><span class=k>impl</span><span class=w> </span><span class=n>std</span>::<span class=n>fmt</span>::<span class=n>Display</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>MyEnum</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>fn</span> <span class=nf>fmt</span><span class=p>(</span><span class=o>&amp;</span><span class=bp>self</span><span class=p>,</span><span class=w> </span><span class=n>f</span>: <span class=kp>&amp;</span><span class=nc>mut</span><span class=w> </span><span class=n>std</span>::<span class=n>fmt</span>::<span class=n>Formatter</span><span class=o>&lt;</span><span class=na>&#39;_</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nc>std</span>::<span class=n>fmt</span>::<span class=nb>Result</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>match</span><span class=w> </span><span class=bp>self</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>            </span><span class=n>MyEnum</span>::<span class=n>Foo</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>write</span><span class=o>!</span><span class=p>(</span><span class=n>f</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Foo&#34;</span><span class=p>),</span><span class=w>
</span><span class=w>            </span><span class=n>MyEnum</span>::<span class=n>Bar</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>write</span><span class=o>!</span><span class=p>(</span><span class=n>f</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Bar&#34;</span><span class=p>),</span><span class=w>
</span><span class=w>        </span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h3 id=联合体union>联合体(Union)</h3>
<ul>
<li><code>union</code>和 enums 类似，但没有标签；</li>
<li><code>union</code>的所有字段共享同一段存储;</li>
<li><code>union</code>的尺寸由其尺寸最大的字段的尺寸所决定;</li>
<li><code>union</code>字段的读取必须放在非安全(<code>unsafe</code>)块里;</li>
<li><code>union</code>没有“活跃字段(active field)”。每次访问联合体只是用所指定的字段的类型解释此联合体的存储;</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=cp>#[repr(C)]</span><span class=w>
</span><span class=w></span><span class=k>union</span> <span class=nc>MyUnion</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>f1</span>: <span class=kt>u32</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>f2</span>: <span class=kt>f32</span><span class=p>,</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>u</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MyUnion</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>f1</span>: <span class=mi>1</span><span class=w> </span><span class=p>};</span><span class=w> </span><span class=c1>//union定义
</span><span class=c1></span><span class=k>unsafe</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>f1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=p>};</span><span class=w>    </span><span class=c1>//union写入是不安全的
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>unsafe</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>f1</span><span class=w> </span><span class=p>};</span><span class=w> </span><span class=c1>//uion读取是不安全的
</span><span class=c1></span><span class=err></span><span class=c1>// union模式匹配
</span><span class=c1></span><span class=k>unsafe</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>match</span><span class=w> </span><span class=n>u</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=n>MyUnion</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>f1</span>: <span class=mi>10</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;ten&#34;</span><span class=p>);</span><span class=w> </span><span class=p>}</span><span class=w>
</span><span class=w>        </span><span class=n>MyUnion</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>f2</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>f2</span><span class=p>);</span><span class=w> </span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h2 id=集合类型>集合类型</h2>
<p>集合类型由多个相同类型的值组成，包括：</p>
<ul>
<li><strong>数组(array)</strong>:</li>
<li><strong>向量(vector)</strong>：</li>
</ul>
<h3 id=数组array>数组(Array)</h3>
<p>在一块连续空间内存中，存储了一系列的同样类型的数据</p>
<ul>
<li>数组的类型为 <code>[T; N]</code>，<code>T</code>表示元素类型，<code>N</code>为元素个数;</li>
<li>只有当 T, N 都相同时，数组的类型才相同；</li>
<li>Rust 数组大小固定，一旦声明，其长度不会增大或缩小；</li>
<li>数组位于 <code>栈</code>上；</li>
<li>array 索引访问错误会产生 panic；</li>
<li><code>array</code>只能储存一种类型的数据，无法存储不同类型的数据；</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=c1>// 数组定义
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>a</span>: <span class=p>[</span><span class=kt>i32</span><span class=p>;</span><span class=w> </span><span class=mi>5</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>];</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>array</span>: <span class=p>[</span><span class=kt>i32</span><span class=p>;</span><span class=w> </span><span class=mi>4</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=mi>42</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>];</span><span class=w>
</span><span class=w></span><span class=c1>// let a = [1,&#34;string&#34;];   //错误，数组元素类型应该相同
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s>&#34;Red&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Yellow&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Blue&#34;</span><span class=p>];</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>second</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>[</span><span class=mi>1</span><span class=p>];</span><span class=w>   </span><span class=c1>// 数组元素索引访问
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>len</span><span class=p>()</span><span class=w>      </span><span class=c1>// 数组长度
</span></code></pre></td></tr></table>
</div>
</div><p><img src=https://raw.githubusercontent.com/ZhuZhengyi/notebook-images/master/2022/03/30-12-57-31-2022-03-30-12-57-10-image.png alt></p>
<h3 id=向量vector>向量(Vector)</h3>
<ul>
<li>
<p><code>Vec</code>是动态数组，会自动增长，不会自动收缩；</p>
</li>
<li>
<p>Vector 包含两部分：</p>
<ul>
<li>
<p>栈上的 vector 结构体：</p>
<ul>
<li>指向堆上连续空间的首指针；</li>
<li>总元素个数；</li>
<li>已使用元素个数；</li>
</ul>
</li>
<li>
<p>堆上的连续分配空间；</p>
</li>
</ul>
</li>
<li>
<p><code>Vec&lt;T></code>中的泛型 <code>T</code> 必须是 <code>Sized</code>的；</p>
</li>
<li>
<p>vector 把所有的元素放在一个分配在堆（heap）上的 array 上。当一个新元素被 push 进来时，vector 检查 array 是否有足够的剩余空间。如果空间不足，vector 就分配一个更大的 array，将所有的元素都拷贝到这个新的 array 中，然后释放旧的 array</p>
</li>
</ul>
<p><img src=https://raw.githubusercontent.com/ZhuZhengyi/notebook-images/master/2022/03/30-12-55-30-2022-03-30-12-55-23-image.png alt></p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=c1>// vector初始化
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>v1</span>: <span class=nb>Vec</span><span class=o>&lt;</span><span class=kt>i32</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Vec</span>::<span class=n>new</span><span class=p>();</span><span class=w>        </span><span class=c1>//Vec::new()
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>v2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vec</span><span class=o>!</span><span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>];</span><span class=w>                 </span><span class=c1>//[1,2,3]
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>v21</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vec</span><span class=o>!</span><span class=p>[</span><span class=kc>false</span><span class=p>;</span><span class=w> </span><span class=mi>4</span><span class=p>];</span><span class=w>                 </span><span class=c1>//[3,3, 3, 3]
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>v3</span>: <span class=nb>Vec</span><span class=o>&lt;</span><span class=n>_</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>..</span><span class=mi>5</span><span class=p>).</span><span class=n>collect</span><span class=p>();</span><span class=w>    </span><span class=c1>//[1,2,3,4]
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>v4</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Vec</span>::<span class=n>with_capacity</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span><span class=w>       </span><span class=c1>//预留空间初始化
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>// vector元素访问
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>third</span>: <span class=kp>&amp;</span><span class=kt>i32</span> <span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>v</span><span class=p>[</span><span class=mi>2</span><span class=p>];</span><span class=w>                </span><span class=c1>//[]运算符
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>third</span>: <span class=nb>Option</span><span class=o>&lt;&amp;</span><span class=kt>i32</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>v</span><span class=p>.</span><span class=n>get</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span><span class=w>     </span><span class=c1>//get()方法
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>// 遍历
</span><span class=c1></span><span class=k>for</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=o>&amp;</span><span class=n>v</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>..</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=c1>// 获得引用
</span><span class=c1></span><span class=k>for</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=o>&amp;</span><span class=k>mut</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>..</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=c1>// 获得可变引用
</span><span class=c1></span><span class=k>for</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>..</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=c1>// 获得所有权，注意此时Vec的属主将会被转移！！
</span><span class=c1>// 迭代器
</span><span class=c1></span><span class=k>for</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>xs</span><span class=p>.</span><span class=n>iter</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;&gt; {}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>x</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=c1>// 内置方法
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vec</span><span class=o>!</span><span class=p>[</span><span class=mi>11</span><span class=p>,</span><span class=mi>22</span><span class=p>];</span><span class=w>
</span><span class=w></span><span class=n>v</span><span class=p>.</span><span class=n>len</span><span class=p>();</span><span class=w>                         </span><span class=c1>//v长度(元素数量)
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>is_empty</span><span class=p>();</span><span class=w>                    </span><span class=c1>//vec是否为空
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>get</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span><span class=w>                        </span><span class=c1>//get
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>iter</span><span class=p>();</span><span class=w>                        </span><span class=c1>//iterator
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=mi>33</span><span class=p>);</span><span class=w>                      </span><span class=c1>//在尾部插入元素33
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>resize</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>);</span><span class=w>                 </span><span class=c1>//
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>111</span><span class=p>);</span><span class=w>                </span><span class=c1>//在索引0处插入111
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>remove</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span><span class=w>                     </span><span class=c1>//删除i元素并返回被删除的元素，索引越界将panic报错退出
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span><span class=w>                         </span><span class=c1>//删除并返回vec尾部的元素，vec为空则返回None
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>append</span><span class=p>(</span><span class=n>vec</span><span class=o>!</span><span class=p>[</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>]);</span><span class=w>            </span><span class=c1>//将另一个vec中的所有元素追加移入vec中，移动后另一个vec变为空vec
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>truncate</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span><span class=w>                    </span><span class=c1>//将vec截断2，多余的元素被删除
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>retain</span><span class=p>(</span><span class=o>|</span><span class=n>x</span><span class=o>|</span><span class=w> </span><span class=o>*</span><span class=n>x</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>20</span><span class=p>);</span><span class=w>            </span><span class=c1>//保留满足条件的
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>drain</span><span class=p>(</span><span class=mi>1</span><span class=p>..</span><span class=o>=</span><span class=mi>3</span><span class=p>);</span><span class=w>                   </span><span class=c1>//删除指定范围的元素，同时返回该范围所有元素的迭代器
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>split_off</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span><span class=w>                   </span><span class=c1>//从index 2处分裂为两个vec
</span><span class=c1></span><span class=n>v</span><span class=p>.</span><span class=n>clear</span><span class=p>();</span><span class=w>                        </span><span class=c1>//清空vec
</span></code></pre></td></tr></table>
</div>
</div><h3 id=切片slice>切片(Slice)</h3>
<ul>
<li>
<p>切片(slice)是对数组(array)或 vector 的一个临时视图;</p>
</li>
<li>
<p>slice 是动态大小类型，无法直接被使用，只能通过引用形式来访问；</p>
</li>
<li>
<p>slice 形式：<code>[T]</code>；</p>
</li>
<li>
<p>Slice 继承了 Array 的 length、item 等很多的方法；</p>
</li>
<li>
<p>slice 包含 2 个字段：</p>
<ul>
<li>指向 slice 起始元素的头指针；</li>
<li>slice 中元素的个数；</li>
</ul>
</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=kd>let</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>];</span><span class=w>  </span><span class=c1>//定义一个数组；
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>v</span><span class=p>[..];</span><span class=w>       </span><span class=c1>//获取数组的切片引用；
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>v</span><span class=p>[</span><span class=mi>1</span><span class=p>..</span><span class=mi>3</span><span class=p>];</span><span class=w>      </span><span class=c1>//获取数组切片[2,3];
</span></code></pre></td></tr></table>
</div>
</div><h3 id=范围range>范围(Range)</h3>
<ul>
<li>Range 是 Rust 内置的用于表示一个范围的数据类型；</li>
<li>Range 数据类型位于 <code>std::ops::RangeXXX</code>内；</li>
<li>每个范围都是一个迭代器，可用 for 循环打印范围内的元素；</li>
</ul>
<p>Rust 支持范围操作符，有以下几种表示范围的操作符：</p>
<table>
<thead>
<tr>
<th>范围表达式</th>
<th>类型</th>
<th>表示的范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>start..end</td>
<td>std::ops::Range</td>
<td>start ≤ x &lt; end</td>
</tr>
<tr>
<td>start..</td>
<td>std::ops::RangeFrom</td>
<td>start ≤ x</td>
</tr>
<tr>
<td>..end</td>
<td>std::ops::RangeTo</td>
<td>x &lt; end</td>
</tr>
<tr>
<td>..</td>
<td>std::ops::RangeFull</td>
<td>-</td>
</tr>
<tr>
<td>start..=end</td>
<td>std::ops::RangeInclusive</td>
<td>start ≤ x ≤ end</td>
</tr>
<tr>
<td>..=end</td>
<td>std::ops::RangeToInclusive</td>
<td>x ≤ end</td>
</tr>
</tbody>
</table>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=c1>// range结构体定义
</span><span class=c1></span><span class=k>pub</span><span class=w> </span><span class=k>struct</span> <span class=nc>Range</span><span class=o>&lt;</span><span class=n>Idx</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>start</span>: <span class=nc>Idx</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>end</span>: <span class=nc>Idx</span><span class=p>,</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// range的使用
</span><span class=c1></span><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>ops</span>::<span class=p>{</span><span class=n>Range</span><span class=p>,</span><span class=w> </span><span class=n>RangeInclusive</span><span class=p>};</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>((</span><span class=mi>1</span><span class=p>..</span><span class=mi>5</span><span class=p>),</span><span class=w> </span><span class=n>Range</span><span class=p>{</span><span class=w> </span><span class=n>start</span>: <span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>end</span>: <span class=mi>5</span><span class=w> </span><span class=p>});</span><span class=w>
</span><span class=w></span><span class=c1>// (1..=5)是结构体std::ops::RangeInclusive的一个实例
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>((</span><span class=mi>1</span><span class=p>..</span><span class=o>=</span><span class=mi>5</span><span class=p>),</span><span class=w> </span><span class=n>RangeInclusive</span>::<span class=n>new</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>));</span><span class=w>
</span><span class=w></span><span class=c1>// 自带的 sum 方法用于求和
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=mi>3</span><span class=o>+</span><span class=mi>4</span><span class=o>+</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=mi>3</span><span class=p>..</span><span class=mi>6</span><span class=p>).</span><span class=n>sum</span><span class=p>());</span><span class=w>
</span><span class=w></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=mi>3</span><span class=o>+</span><span class=mi>4</span><span class=o>+</span><span class=mi>5</span><span class=o>+</span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=mi>3</span><span class=p>..</span><span class=o>=</span><span class=mi>6</span><span class=p>).</span><span class=n>sum</span><span class=p>());</span><span class=w>
</span><span class=w></span><span class=p>(</span><span class=mi>3</span><span class=p>..</span><span class=mi>6</span><span class=p>)</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// 每个范围都是一个迭代器，可用for 循环打印范围内的元素
</span><span class=c1></span><span class=k>for</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>..</span><span class=mi>5</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>i</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=k>for</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>..</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>i</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=c1>// 逆序
</span><span class=c1></span><span class=k>for</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>..</span><span class=o>=</span><span class=mi>5</span><span class=p>).</span><span class=n>rev</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>i</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// 范围操作
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>arr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=mi>11</span><span class=p>,</span><span class=w> </span><span class=mi>22</span><span class=p>,</span><span class=w> </span><span class=mi>33</span><span class=p>,</span><span class=w> </span><span class=mi>44</span><span class=p>,</span><span class=w> </span><span class=mi>55</span><span class=p>];</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>arr</span><span class=p>[</span><span class=mi>0</span><span class=p>..</span><span class=mi>3</span><span class=p>];</span><span class=w>    </span><span class=c1>// [11,22,33]
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>arr</span><span class=p>[</span><span class=mi>1</span><span class=p>..</span><span class=o>=</span><span class=mi>3</span><span class=p>];</span><span class=w>   </span><span class=c1>// [22, 33, 44]
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>arr</span><span class=p>[..];</span><span class=w>      </span><span class=c1>// [11, 22, 33, 44, 55]
</span></code></pre></td></tr></table>
</div>
</div><h2 id=常用数据类型>常用数据类型</h2>
<h3 id=字符串>字符串</h3>
<p>Rust 中的字符串包括两种：<code>str</code>和 <code>String</code>。</p>
<h4 id=str字符串字面量>str(字符串字面量)</h4>
<ul>
<li>
<p><code>str</code>由核心语言提供 <code>core::str</code>；</p>
</li>
<li>
<p>常以引用的形式出现——<code>&str</code>；</p>
</li>
<li>
<p>静态不可变；</p>
</li>
<li>
<p>支持转义；</p>
</li>
<li>
<p>支持切片操作；</p>
</li>
<li>
<p><code>&str</code>有两种产生方式：</p>
<ul>
<li>字符串字面量：<code>&str</code>内存位于程序的预分配文本区，该区域为只读区域；</li>
<li>字符串引用：为一个 <code>String</code>的切片引用，原 <code>String</code>字符位于堆上；</li>
</ul>
</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=c1>//定义
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;Hello&#34;</span><span class=p>;</span><span class=w>                </span><span class=c1>// 字符串字面量
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>x</span>: <span class=kp>&amp;</span><span class=nb>&#39;static</span><span class=w> </span><span class=kt>str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;Hello&#34;</span><span class=p>;</span><span class=w>  </span><span class=c1>//完整形式
</span><span class=c1>//转义
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;foo
</span><span class=s>         bar&#34;</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>w</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;foo\n      bar&#34;</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=n>z</span><span class=p>,</span><span class=w> </span><span class=n>w</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=string字符串>String(字符串)</h4>
<ul>
<li>
<p><code>String</code> 由标准库提供的 <code>std::String</code>；</p>
</li>
<li>
<p>位于堆(heap)上分配内存；</p>
</li>
<li>
<p>可增长的、可变的、有所有权；</p>
</li>
<li>
<p><code>String</code> 和 <code>&str</code> 都是 UTF-8 编码的；</p>
</li>
<li>
<p><code>String</code> -> <code>&str</code>非常轻松，几乎没有开销；</p>
</li>
<li>
<p><code>&str</code> -> <code>String</code>是需要在堆上请求内存的；</p>
</li>
<li>
<p><code>String</code>不支持通过下标访问，可转换为 <code>&str</code>进行；</p>
</li>
</ul>
<ul>
<li>
<p>不是 char 数组, 而是 UTF-8<strong>变长</strong>序列；</p>
</li>
<li>
<p>ASCII 字符占一个字节 byte, 其余字符占多个不定长字节.</p>
</li>
<li>
<p><code>len()</code>方法返回的是字节(byte)长度, 而非字符(char)长度</p>
</li>
<li>
<p><code>chars().count()</code>返回字符(char)长度</p>
</li>
<li>
<p>一个栈上的 String 变量在内存中表示如下:</p>
</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=c1>//新建String
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>String</span>::<span class=n>new</span><span class=p>();</span><span class=w>                 </span><span class=c1>//new: 创建空字符串
</span><span class=c1>//&amp;str -&gt; String
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;string&#34;</span><span class=p>.</span><span class=n>to_string</span><span class=p>()</span><span class=w>            </span><span class=c1>//to_string: 创建非空字符串
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;string2&#34;</span><span class=p>)</span><span class=w>         </span><span class=c1>//from: 创建非空字符串
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>s4</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;foo&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>s5</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;bar&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=c1>//raw string
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>raw_str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>r&#34;Escapes don&#39;t work here: \x3F \u{211D}&#34;</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=n>raw_str</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Escapes don&#39;t work here: ? ℝ&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>quotes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>r#&#34;And then I said: &#34;There is no escape!&#34;&#34;#</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>quotes</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=c1>// 如果希望在字符串中使用 # 号，可以如下使用：
</span><span class=c1></span><span class=kd>let</span><span class=w>  </span><span class=n>delimiter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>r###&#34;A string with &#34;# in it. And even &#34;##!&#34;###</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>delimiter</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=c1>// String -&gt; &amp;str
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>str1</span>: <span class=kp>&amp;</span><span class=kt>str</span> <span class=o>=</span><span class=w> </span><span class=n>s2</span><span class=p>.</span><span class=n>as_str</span><span class=p>();</span><span class=w>        </span><span class=c1>//
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>str2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;*</span><span class=n>s2</span><span class=p>;</span><span class=w> </span><span class=c1>//String 实现impl Deref&lt;Target=str&gt; for String
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>str2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>s2</span><span class=p>;</span><span class=w>  </span><span class=c1>//string -&gt; &amp;str
</span><span class=c1>//更新字符串
</span><span class=c1></span><span class=n>s4</span><span class=p>.</span><span class=n>push_str</span><span class=p>(</span><span class=s>&#34;bar&#34;</span><span class=p>);</span><span class=w>                   </span><span class=c1>//push_str: 添加字符串
</span><span class=c1></span><span class=n>s4</span><span class=p>.</span><span class=n>push_str</span><span class=p>(</span><span class=o>&amp;</span><span class=n>s2</span><span class=p>)</span><span class=w>                      </span><span class=c1>// 这里是&amp;s2 而不是s2
</span><span class=c1></span><span class=n>s4</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=sc>&#39;l&#39;</span><span class=p>)</span><span class=w>                          </span><span class=c1>//push: 添加字符
</span><span class=c1>//连接字符串
</span><span class=c1>// let s3 = s1 + &#34;wold&#34;;
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=o>&amp;</span><span class=n>s2</span><span class=p>;</span><span class=w>   </span><span class=c1>//s1 被移动了，不能继续使用
</span><span class=c1>//格式化字符串
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>format</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}-{}-{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>s1</span><span class=p>,</span><span class=w> </span><span class=n>s2</span><span class=p>,</span><span class=w> </span><span class=n>s3</span><span class=p>);</span><span class=w>  </span><span class=c1>//format!宏不会获取参数的所有权
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>// Vec&lt;char&gt; -&gt; String
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s4</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>String</span>::<span class=n>from_iter</span><span class=p>(</span><span class=n>vec</span><span class=o>!</span><span class=p>[</span><span class=sc>&#39;a&#39;</span><span class=p>,</span><span class=w> </span><span class=sc>&#39;b&#39;</span><span class=p>,</span><span class=w> </span><span class=sc>&#39;c&#39;</span><span class=p>].</span><span class=n>iter</span><span class=p>());</span><span class=w> </span><span class=c1>//s4 = &#34;abc&#34;
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>// 字符串slice
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;hello&#34;</span><span class=p>);</span><span class=w>   </span><span class=c1>//&amp;str -&gt; String
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;wold&#34;</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>s1</span><span class=p>[..</span><span class=mi>1</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>s2</span><span class=p>[</span><span class=mi>1</span><span class=p>..</span><span class=mi>2</span><span class=p>]);</span><span class=w> </span><span class=c1>// 不要忘了 &amp; 符号
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>// string -&gt; &amp;[u8]
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>u8_bytes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>as_bytes</span><span class=p>();</span><span class=w>   </span><span class=c1>// &amp;[104, 101, 108, 108, 111],
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>chars</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s2</span><span class=p>.</span><span class=n>chars</span><span class=p>();</span><span class=w>     </span><span class=c1>//Chars
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=n>s1</span><span class=p>.</span><span class=n>chars</span><span class=p>().</span><span class=n>nth</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=w>  </span><span class=c1>// 第2个字符
</span><span class=c1>// 遍历字符
</span><span class=c1></span><span class=k>for</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=s>&#34;abcd&#34;</span><span class=p>.</span><span class=n>chars</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=p>);</span><span class=w> </span><span class=c1>// a,b,c,d
</span><span class=c1></span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=c1>// 遍历byte
</span><span class=c1></span><span class=k>for</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=s>&#34;नमस्ते&#34;</span><span class=p>.</span><span class=n>bytes</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>);</span><span class=w> </span><span class=c1>// 224 164 168 224 ...
</span><span class=c1></span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=c1>// 插入
</span><span class=c1></span><span class=n>s1</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=sc>&#39;,&#39;</span><span class=p>);</span><span class=w>   </span><span class=c1>//插入字符
</span><span class=c1></span><span class=n>s1</span><span class=p>.</span><span class=n>insert_str</span><span class=p>(</span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=s>&#34; I like&#34;</span><span class=p>);</span><span class=w>  </span><span class=c1>//插入字符串字面量
</span><span class=c1>// 替换
</span><span class=c1></span><span class=n>s1</span><span class=p>.</span><span class=n>replace</span><span class=p>(</span><span class=s>&#34;rust&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;RUST&#34;</span><span class=p>);</span><span class=w>       </span><span class=c1>//替换所有子串，返回替换后的新字符串
</span><span class=c1></span><span class=n>s1</span><span class=p>.</span><span class=n>replacen</span><span class=p>(</span><span class=s>&#34;rust&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;RUST&#34;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span><span class=w>   </span><span class=c1>//替换1个子串，返回替换后的新字符串
</span><span class=c1></span><span class=n>s1</span><span class=p>.</span><span class=n>replace_range</span><span class=p>(</span><span class=mi>7</span><span class=p>..</span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=s>&#34;R&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=c1>// 删除
</span><span class=c1></span><span class=n>s1</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span><span class=w>         </span><span class=c1>//删除s1尾部字符；
</span><span class=c1></span><span class=n>s1</span><span class=p>.</span><span class=n>remove</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span><span class=w>     </span><span class=c1>//删除s1第0个字节的字符, 如果参数不在字符的字节边界，则发生错误；
</span><span class=c1>// 截断
</span><span class=c1></span><span class=n>s1</span><span class=p>.</span><span class=n>truncate</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span><span class=w>   </span><span class=c1>//截断s1从第3个字节开始到最后的所有字符；
</span><span class=c1></span><span class=n>s1</span><span class=p>.</span><span class=n>clear</span><span class=p>();</span><span class=w>       </span><span class=c1>//清空字符串所有字符；
</span><span class=c1>// 连接
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;abc&#34;</span><span class=p>;</span><span class=w>  </span><span class=c1>//连接字符串字面量；
</span><span class=c1></span><span class=n>s1</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=s>&#34;cdf&#34;</span><span class=p>;</span><span class=w>   </span><span class=c1>//s1为mut
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>//字符串切片
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;Hello word&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>hello</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>s</span><span class=p>[</span><span class=mi>0</span><span class=p>..</span><span class=mi>5</span><span class=p>];</span><span class=w>       </span><span class=c1>// hello: &amp;str
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>word</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>s</span><span class=p>[</span><span class=mi>6</span><span class=p>..</span><span class=mi>11</span><span class=p>];</span><span class=w>       </span><span class=c1>// word: &amp;str
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>//
</span><span class=c1></span><span class=k>use</span><span class=w> </span><span class=n>utf8_slice</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;The 🚀 goes to the 🌑!&#34;</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>rocket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>utf8_slice</span>::<span class=n>slice</span><span class=p>(</span><span class=n>s</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>);</span><span class=w>  </span><span class=c1>// 结果是 &#34;🚀&#34;
</span></code></pre></td></tr></table>
</div>
</div><h3 id=哈希表hashmap>哈希表(HashMap)</h3>
<ul>
<li>所有实现了 <code>Eq</code>和 <code>Hash</code>的类型都可以作为 HashMap 的 key；</li>
<li>通过 <code>#[derive(PartialEq, Eq,hash)]</code>可以快速的实现 <code>Eq</code>和 <code>Hash</code>。</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=c1>//引入hashmap包
</span><span class=c1></span><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>collections</span>::<span class=n>HashMap</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>//new
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>scores</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>HashMap</span>::<span class=n>new</span><span class=p>();</span><span class=w>        </span><span class=c1>//new
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>solar_distance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>HashMap</span>::<span class=n>from</span><span class=p>([</span><span class=w>    </span><span class=c1>//from
</span><span class=c1></span><span class=w>    </span><span class=p>(</span><span class=s>&#34;Mercury&#34;</span><span class=p>,</span><span class=w> </span><span class=mf>0.4</span><span class=p>),</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=s>&#34;Venus&#34;</span><span class=p>,</span><span class=w> </span><span class=mf>0.7</span><span class=p>),</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=s>&#34;Earth&#34;</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>),</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=s>&#34;Mars&#34;</span><span class=p>,</span><span class=w> </span><span class=mf>1.5</span><span class=p>),</span><span class=w>
</span><span class=w></span><span class=p>]);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=n>scores</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=nb>String</span>::<span class=n>form</span><span class=p>(</span><span class=s>&#34;Blue&#34;</span><span class=p>),</span><span class=w> </span><span class=mi>10</span><span class=p>);</span><span class=w>    </span><span class=c1>//插入
</span><span class=c1></span><span class=n>scores</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;Yellow&#34;</span><span class=p>),</span><span class=w> </span><span class=mi>50</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>teams</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vec</span><span class=o>!</span><span class=p>[</span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;Blue&#34;</span><span class=p>),</span><span class=w> </span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;Yellow&#34;</span><span class=p>)];</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>initial_scores</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vec</span><span class=o>!</span><span class=p>[</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>50</span><span class=p>];</span><span class=w>
</span><span class=w></span><span class=c1>// zip, 合并k-v
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>scores</span>: <span class=nc>HashMap</span><span class=o>&lt;</span><span class=n>_</span><span class=p>,</span><span class=n>_</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>teams</span><span class=p>.</span><span class=n>iter</span><span class=p>().</span><span class=n>zip</span><span class=p>(</span><span class=n>initial_scores</span><span class=p>.</span><span class=n>iter</span><span class=p>()).</span><span class=n>collect</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>scores</span><span class=p>.</span><span class=n>get</span><span class=p>(</span><span class=nb>String</span>::<span class=n>form</span><span class=p>(</span><span class=s>&#34;Blue&#34;</span><span class=p>));</span><span class=w> </span><span class=c1>//get
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>//遍历
</span><span class=c1></span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=o>&amp;</span><span class=n>scores</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>  </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{}: {}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>value</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// entry
</span><span class=c1>// or_insert 方法会返回这个键的值的一个可变引用（&amp;mut V）
</span><span class=c1></span><span class=n>scores</span><span class=p>.</span><span class=n>entry</span><span class=p>(</span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;Yellow&#34;</span><span class=p>)).</span><span class=n>or_insert</span><span class=p>(</span><span class=mi>50</span><span class=p>);</span><span class=w>         </span><span class=c1>//如果存在就忽略，如果不存在就插入
</span><span class=c1></span><span class=o>*</span><span class=n>scores</span><span class=p>.</span><span class=n>entry</span><span class=p>(</span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;Yellow&#34;</span><span class=p>)).</span><span class=n>or_insert</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>  </span><span class=c1>//更新
</span><span class=c1></span><span class=n>scores2</span><span class=p>.</span><span class=n>entry</span><span class=p>(</span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;Yellow&#34;</span><span class=p>)).</span><span class=n>or_default</span><span class=p>().</span><span class=n>push</span><span class=p>(</span><span class=mi>50</span><span class=p>);</span><span class=w>  </span><span class=c1>//string-&gt;vec&lt;i32&gt; 插入
</span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Rust 中的 HashSet 实现非常简单就是 <code>HashMap&lt;T,()></code>；</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>collections</span>::<span class=n>HashSet</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=c1>// Type inference lets us omit an explicit type signature (which
</span><span class=c1>// would be `HashSet&lt;String&gt;` in this example).
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>books</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>HashSet</span>::<span class=n>new</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// Add some books.
</span><span class=c1></span><span class=n>books</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;A Dance With Dragons&#34;</span><span class=p>.</span><span class=n>to_string</span><span class=p>());</span><span class=w>
</span><span class=w></span><span class=n>books</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;To Kill a Mockingbird&#34;</span><span class=p>.</span><span class=n>to_string</span><span class=p>());</span><span class=w>
</span><span class=w></span><span class=n>books</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;The Odyssey&#34;</span><span class=p>.</span><span class=n>to_string</span><span class=p>());</span><span class=w>
</span><span class=w></span><span class=n>books</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;The Great Gatsby&#34;</span><span class=p>.</span><span class=n>to_string</span><span class=p>());</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// Check for a specific one.
</span><span class=c1></span><span class=k>if</span><span class=w> </span><span class=o>!</span><span class=n>books</span><span class=p>.</span><span class=n>contains</span><span class=p>(</span><span class=s>&#34;The Winds of Winter&#34;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;We have {} books, but The Winds of Winter ain&#39;t one.&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>             </span><span class=n>books</span><span class=p>.</span><span class=n>len</span><span class=p>());</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// Remove a book.
</span><span class=c1></span><span class=n>books</span><span class=p>.</span><span class=n>remove</span><span class=p>(</span><span class=s>&#34;The Odyssey&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// Iterate over everything.
</span><span class=c1></span><span class=k>for</span><span class=w> </span><span class=n>book</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=o>&amp;</span><span class=n>books</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{book}&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h3 id=有序映射btreemap>有序映射(BTreeMap)</h3>
<ul>
<li>key有序的k-v存储结构；</li>
<li>底层使用BTree；</li>
<li>通过迭代器可按 key 顺序访问 BtreeMap 中的所有元素；</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>collections</span>::<span class=n>BTreeMap</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// new方法
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>movie_reviews</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BTreeMap</span>::<span class=n>new</span><span class=p>();</span><span class=w>
</span><span class=w></span><span class=c1>// insert
</span><span class=c1></span><span class=n>movie_reviews</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;Office Space&#34;</span><span class=p>,</span><span class=w>       </span><span class=s>&#34;Deals with real issues in the workplace.&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>movie_reviews</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;Pulp Fiction&#34;</span><span class=p>,</span><span class=w>       </span><span class=s>&#34;Masterpiece.&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>movie_reviews</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;The Godfather&#34;</span><span class=p>,</span><span class=w>      </span><span class=s>&#34;Very enjoyable.&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>movie_reviews</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;The Blues Brothers&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Eye lyked it a lot.&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// from 
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=n>solar_distance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BTreeMap</span>::<span class=n>from</span><span class=p>([</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=s>&#34;Mercury&#34;</span><span class=p>,</span><span class=w> </span><span class=mf>0.4</span><span class=p>),</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=s>&#34;Venus&#34;</span><span class=p>,</span><span class=w> </span><span class=mf>0.7</span><span class=p>),</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=s>&#34;Earth&#34;</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>),</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=s>&#34;Mars&#34;</span><span class=p>,</span><span class=w> </span><span class=mf>1.5</span><span class=p>),</span><span class=w>
</span><span class=w></span><span class=p>]);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h3 id=有序集合btreeset>有序集合(BTreeSet)</h3>
<ul>
<li>BTreeSet 为有序集合, 和 hashset 区别在于集合中的元素为有序集;</li>
<li></li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>collections</span>::<span class=n>BTreeSet</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// 类型推断允许我们省略显式类型签名（它
</span><span class=c1>// 在这个例子中将是 `BTreeSet&lt;&amp;str&gt;`）。
</span><span class=c1></span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>books</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BTreeSet</span>::<span class=n>new</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// 添加一些书籍。
</span><span class=c1></span><span class=n>books</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;A Dance With Dragons&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>books</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;To Kill a Mockingbird&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>books</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;The Odyssey&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>books</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=s>&#34;The Great Gatsby&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// 检查一个特定的。
</span><span class=c1></span><span class=k>if</span><span class=w> </span><span class=o>!</span><span class=n>books</span><span class=p>.</span><span class=n>contains</span><span class=p>(</span><span class=s>&#34;The Winds of Winter&#34;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;We have {} books, but The Winds of Winter ain&#39;t one.&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>             </span><span class=n>books</span><span class=p>.</span><span class=n>len</span><span class=p>());</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=n>books</span><span class=p>.</span><span class=n>remove</span><span class=p>(</span><span class=s>&#34;The Odyssey&#34;</span><span class=p>);</span><span class=w>  </span><span class=c1>// 删除一本书。
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=c1>// 遍历所有内容。
</span><span class=c1></span><span class=k>for</span><span class=w> </span><span class=n>book</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=o>&amp;</span><span class=n>books</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>println</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;{book}&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h3 id=双端队列vecdeque>双端队列(VecDeque)</h3>
<ul>
<li>基于可扩张的环形缓冲双端队列；</li>
</ul>
<h3 id=二叉堆优先队列binaryheap>二叉堆/优先队列(BinaryHeap)</h3>
<ul>
<li>BinaryHeap 是 rust 中的;</li>
<li>BinaryHeap 默认为大端堆, 即最大值在堆顶, 通过使用 <code>Reverse</code>得到小端堆;</li>
<li></li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>collections</span>::<span class=n>BinaryHeap</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>heap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BinaryHeap</span>::<span class=n>new</span><span class=p>();</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=n>heap2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BinaryHeap</span>::<span class=n>from</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>]);</span><span class=w>  </span><span class=c1>//
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=n>heap</span><span class=p>.</span><span class=n>peek</span><span class=p>(),</span><span class=w> </span><span class=nb>None</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>heap</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=mi>93</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>heap</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=mi>80</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>heap</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=mi>48</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=n>heap</span><span class=p>.</span><span class=n>peek</span><span class=p>(),</span><span class=w> </span><span class=nb>Some</span><span class=p>(</span><span class=o>&amp;</span><span class=mi>93</span><span class=p>));</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>cmp</span>::<span class=n>Reverse</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>heap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BinaryHeap</span>::<span class=n>new</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// 在 `Reverse` 中包装值
</span><span class=c1></span><span class=n>heap</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>Reverse</span><span class=p>(</span><span class=mi>1</span><span class=p>));</span><span class=w>
</span><span class=w></span><span class=n>heap</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>Reverse</span><span class=p>(</span><span class=mi>5</span><span class=p>));</span><span class=w>
</span><span class=w></span><span class=n>heap</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>Reverse</span><span class=p>(</span><span class=mi>2</span><span class=p>));</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// 如果我们现在弹出这些分数，它们应该以相反的顺序返回。
</span><span class=c1></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=n>heap</span><span class=p>.</span><span class=n>pop</span><span class=p>(),</span><span class=w> </span><span class=nb>Some</span><span class=p>(</span><span class=n>Reverse</span><span class=p>(</span><span class=mi>1</span><span class=p>)));</span><span class=w>
</span><span class=w></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=n>heap</span><span class=p>.</span><span class=n>pop</span><span class=p>(),</span><span class=w> </span><span class=nb>Some</span><span class=p>(</span><span class=n>Reverse</span><span class=p>(</span><span class=mi>2</span><span class=p>)));</span><span class=w>
</span><span class=w></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=n>heap</span><span class=p>.</span><span class=n>pop</span><span class=p>(),</span><span class=w> </span><span class=nb>Some</span><span class=p>(</span><span class=n>Reverse</span><span class=p>(</span><span class=mi>5</span><span class=p>)));</span><span class=w>
</span><span class=w></span><span class=n>assert_eq</span><span class=o>!</span><span class=p>(</span><span class=n>heap</span><span class=p>.</span><span class=n>pop</span><span class=p>(),</span><span class=w> </span><span class=nb>None</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h2 id=高级类型>高级类型</h2>
<h3 id=类型别名>类型别名</h3>
<ul>
<li>
<p>Rust使用 <code>type</code> 关键字来给予现有类型另一个名字；</p>
</li>
<li>
<p>type定义的类型别名拥有和原类型同一类型；</p>
</li>
<li>
<p>类型别名的主要用途是减少重复；</p>
</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>type</span> <span class=nc>Kilometers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>i32</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h3 id=never-type>never type</h3>
<h3 id=dyn>dyn</h3>
<h3 id=sized>sized</h3>
<h2 id=参考>参考</h2>
<ol>
<li><a href=https://www.codemore.top/p/ce5ae822-e775-351d-830c-994110faf023/>https://www.codemore.top/p/ce5ae822-e775-351d-830c-994110faf023/</a></li>
<li><a href=https://unpluggedcoder.me/2019/08/15/Rust%E5%85%A5%E9%97%A8%E5%A4%B1%E8%B4%A5%E4%B9%8BOwnership/>https://unpluggedcoder.me/2019/08/15/Rust%E5%85%A5%E9%97%A8%E5%A4%B1%E8%B4%A5%E4%B9%8BOwnership/</a></li>
<li><a href=https://www.cnblogs.com/sumyuan/p/13787094.html>Rust 之路（2）——数据类型 上篇 - sumyuan - 博客园</a></li>
<li><a href=https://doc.rust-lang.org/std/collections/struct.VecDeque.html>https://doc.rust-lang.org/std/collections/struct.VecDeque.html</a></li>
<li><a href=https://rustwiki.org/zh-CN/edition-guide/rust-2018/data-types/union-for-an-unsafe-form-of-enum.html>https://rustwiki.org/zh-CN/edition-guide/rust-2018/data-types/union-for-an-unsafe-form-of-enum.html</a></li>
<li><a href=https://rustwiki.org/zh-CN/std/collections/binary_heap/struct.BinaryHeap.html>https://rustwiki.org/zh-CN/std/collections/binary_heap/struct.BinaryHeap.html</a></li>
</ol>
</div>
<div class=post-copyright>
<p class=copyright-item>
<span class=item-title>文章作者</span>
<span class=item-content>Justice</span>
</p>
<p class=copyright-item>
<span class=item-title>上次更新</span>
<span class=item-content>
2024-03-07 11:58:54
</span>
</p>
<p class=copyright-item>
<span class=item-title>许可协议</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span>
</p>
</div>
<div class=post-reward>
<input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label>
<div class=qr-code>
<label class=qr-code-image for=reward>
<img class=image src=/image/wx_reward_qrcode.png>
<span>微信打赏</span>
</label>
<label class=qr-code-image for=reward>
<img class=image src=/image/alipay_reward_qrcode.png>
<span>支付宝打赏</span>
</label>
<label class=qr-code-image for=reward>
<img class=image src=/image/bitcoin_reward_qrcode.png>
<span>比特币打赏</span>
</label>
</div>
</div>
<footer class=post-footer>
<div class=post-tags>
<a href=https://justice.bj.cn/tags/language/>language</a>
<a href=https://justice.bj.cn/tags/rust/>rust</a>
</div>
<nav class=post-nav>
<a class=prev href=/post/31.distribute/%E4%B8%80%E8%87%B4%E6%80%A7%E7%AE%97%E6%B3%95/raft%E7%AE%97%E6%B3%95/>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417l277.93508-310.326815c11.338233-12.190647 11.035334-32.285311-.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"/></svg>
</i>
<span class="prev-text nav-default">Raft算法</span>
<span class="prev-text nav-mobile">上一篇</span>
</a>
<a class=next href=/post/14.language/rust/rust%E5%B9%B6%E5%8F%91/>
<span class="next-text nav-default">Rust并发</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697c-11.777231-11.500939-30.216186-10.304694-41.178865 2.712784z"/></svg>
</i>
</a>
</nav>
</footer>
</article>
<div class="post bg-white">
<script src=https://utteranc.es/client.js repo=ZhuZhengyi/gh_comment issue-term=pathname theme=github-light crossorigin=anonymous async></script>
</div>
</div>
</div>
</main>
<footer id=footer class=footer>
<div class=icon-links>
<a href=mailto:justice_103@126.com rel="me noopener" class=iconfont title=email><svg class="icon" viewBox="0 0 1451 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z"/></svg>
</a>
<a href=https://justice.bj.cn/index.xml rel="noopener alternate" type=application/rss+xml class=iconfont title=rss target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><path d="M819.157333 1024C819.157333 574.592 449.408 204.8.0 204.8V0c561.706667.0 1024 462.293333 1024 1024H819.157333zM140.416 743.04a140.8 140.8.0 01140.501333 140.586667A140.928 140.928.0 01140.074667 1024C62.72 1024 0 961.109333.0 883.626667S62.933333 743.082667 140.416 743.04zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667v-199.04c372.352.0 678.784 306.517333 678.784 678.826667z"/></svg>
</a>
</div>
<div class=copyright>
<span class=power-by>
Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span>
<span class=division>|</span>
<span class=theme-info>
Theme - <a class=theme-link href=https://github.com/xianmin/hugo-theme-jane>Jane</a>
</span>
<span class=copyright-year>
&copy;
2000 -
2024
<span class=heart>
<i class=iconfont><svg class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14"><path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7.0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1.0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2.0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3.1-42.5-8-83.6-24-122.2z" fill="#8a8a8a"/></svg>
</i>
</span><span class=author>
Justice
</span></span>
<span id=busuanzi_container>
访客数/访问量：<span id=busuanzi_value_site_uv></span>/<span id=busuanzi_value_site_pv></span>
</span>
</div>
</footer>
<div class=back-to-top id=back-to-top>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35"><path d="M510.866688 227.694839 95.449397 629.218702h235.761562L329.15309 958.01517h362.40389L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777h894.052392v131.813095H63.840492V63.962777zm0 0"/></svg>
</i>
</div>
</div>
<script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script>
<script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script>
<script type=text/javascript src=/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin=anonymous></script>
<script type=text/javascript>window.MathJax={showProcessingMessages:!1,messageStyle:'none'}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css integrity=sha384-BdGj8xC2eZkQaxoQ8nSLefg4AV4/AwB3Fj+8SUSo7pnKP6Eoy18liIKTPn9oBYNG crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.js integrity=sha384-JiKN5O8x9Hhs/UE5cT5AAJqieYlOZbGT3CHws/y97o3ty4R7/O5poG9F3JoiOYw1 crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{})})</script>
<script type=text/javascript src=/js/load-photoswipe.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe.min.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe-ui-default.min.js></script>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<script src=/js/fuse.min.js></script>
<script src=/js/fastsearch.js></script>
</body>
</html>