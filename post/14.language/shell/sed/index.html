<!doctype html><html lang=zh-cn itemscope itemtype=http://schema.org/WebPage>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>sed - Justice的小站</title>
<meta name=renderer content="webkit">
<meta name=referrer content="no-referrer">
<meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes">
<meta name=MobileOptimized content="width">
<meta name=HandheldFriendly content="true">
<meta name=applicable-device content="pc,mobile">
<meta name=theme-color content="#f8f5ec">
<meta name=msapplication-navbutton-color content="#f8f5ec">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec">
<meta name=mobile-web-app-capable content="yes">
<meta name=author content="Justice">
<meta name=description content="sed 简介 sed 是 unix 下常用的文本处理工具之一， 常用法 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48">
<meta name=keywords content="tech,it,blog">
<meta name=generator content="Hugo 0.88.1">
<link rel=canonical href=https://justice.bj.cn/post/14.language/shell/sed/>
<link rel=icon href=/favicon.ico>
<link rel=stylesheet href=/sass/jane.min.59a446ca0f76fe2dfc772a3a0b7512965043b4433e3e0dcf5b8ebeede14fae0c.css integrity="sha256-WaRGyg92/i38dyo6C3USllBDtEM+Pg3PW46+7eFPrgw=" media=screen crossorigin=anonymous>
<meta property="og:title" content="sed">
<meta property="og:description" content="sed 简介 sed 是 unix 下常用的文本处理工具之一， 常用法 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48">
<meta property="og:type" content="article">
<meta property="og:url" content="https://justice.bj.cn/post/14.language/shell/sed/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2023-07-22T09:15:14+08:00">
<meta property="article:modified_time" content="2023-07-22T09:15:14+08:00"><meta property="og:site_name" content="Justice的小站">
<meta itemprop=name content="sed">
<meta itemprop=description content="sed 简介 sed 是 unix 下常用的文本处理工具之一， 常用法 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48"><meta itemprop=datePublished content="2023-07-22T09:15:14+08:00">
<meta itemprop=dateModified content="2023-07-22T09:15:14+08:00">
<meta itemprop=wordCount content="2523">
<meta itemprop=keywords content="language,shell,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="sed">
<meta name=twitter:description content="sed 简介 sed 是 unix 下常用的文本处理工具之一， 常用法 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<div id=mobile-navbar class=mobile-navbar>
<div class=mobile-header-logo>
<a href=/ class=logo>Justice's Blog</a>
</div>
<div class=mobile-navbar-icon>
<span></span>
<span></span>
<span></span>
</div>
</div>
<nav id=mobile-menu class="mobile-menu slideout-menu">
<ul class=mobile-menu-list>
<li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/>主页</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/post/>点滴</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/tags/>标签</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://justice.bj.cn/categories/>分类</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=http://passer-by.com/pacman/ rel=noopener target=_blank>
更多
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6 21.568 21.632 54.144 54.208 54.144 54.208C534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92.0.0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"/><path d="M841.152 457.152c-30.528.0-54.784 24.512-54.784 54.656V786.56H237.696V237.696h206.016c6.656.0 10.752.0 13.248.0 30.72.0 55.04-24.512 55.04-54.848C512 152.32 487.36 128 456.96 128H183.04C153.216 128 128 152.576 128 182.848c0 3.136.256 6.272.768 9.28C128.256 195.136 128 198.272 128 201.408v639.488c0 .064.0.192.0.256.0.128.0.192.0.32.0 30.528 24.512 54.784 54.784 54.784H829.76c6.592.0 9.728.0 11.712.0 28.736.0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344v-20.352V561.408v-49.28C896 481.792 871.424 457.152 841.152 457.152z"/></svg>
</i>
</a>
</li>
</ul>
</nav>
<link rel=stylesheet href=/lib/photoswipe/photoswipe.min.css>
<link rel=stylesheet href=/lib/photoswipe/default-skin/default-skin.min.css>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div>
<header id=header class="header container">
<div class=logo-wrapper>
<a href=/ class=logo>
Justice's Blog
</a>
</div>
<nav class=site-navbar>
<ul id=menu class=menu>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/>主页</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/post/>点滴</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/tags/>标签</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://justice.bj.cn/categories/>分类</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=http://passer-by.com/pacman/ rel=noopener target=_blank>
更多
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6 21.568 21.632 54.144 54.208 54.144 54.208C534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92.0.0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"/><path d="M841.152 457.152c-30.528.0-54.784 24.512-54.784 54.656V786.56H237.696V237.696h206.016c6.656.0 10.752.0 13.248.0 30.72.0 55.04-24.512 55.04-54.848C512 152.32 487.36 128 456.96 128H183.04C153.216 128 128 152.576 128 182.848c0 3.136.256 6.272.768 9.28C128.256 195.136 128 198.272 128 201.408v639.488c0 .064.0.192.0.256.0.128.0.192.0.32.0 30.528 24.512 54.784 54.784 54.784H829.76c6.592.0 9.728.0 11.712.0 28.736.0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344v-20.352V561.408v-49.28C896 481.792 871.424 457.152 841.152 457.152z"/></svg>
</i>
</a>
</li>
<li class=menu-item>
<a id=search-btn class="menu-item-link menu-item-search" href=#>
<i class=iconfont><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="18" height="18" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M973.81454219 973.81454219a91.78207815 91.78207815.0 01-129.80999631.0L682.0297247 811.83972101a425.48527711 425.48527711.0 01-230.35931791 68.16531768 428.3346319 428.3346319.0 11428.3346319-428.3346319A425.48527711 425.48527711.0 01811.83972101 682.0297247l162.02961656 161.97482118a91.83687354 91.83687354.0 01-.05479538 129.80999631zm-522.1441354-828.1209266a305.97679241 305.97679241.0 100 611.95358361 305.97679241 305.97679241.0 000-611.95358361z"/></svg>
</i>
</a>
</li>
</ul>
</nav>
</header>
<div id=mobile-panel>
<main id=main class="main bg-llight">
<div class=content-wrapper>
<div id=content class="content container">
<article class="post bg-white">
<header class=post-header>
<h1 class=post-title>sed</h1>
<div class=post-meta>
<time datetime=2023-07-22 class=post-time>
2023-07-22 09:15:14
</time>
<div class=post-category>
<a href=https://justice.bj.cn/categories/language/> language </a>
<a href=https://justice.bj.cn/categories/shell/> shell </a>
</div>
<span id=busuanzi_container_page_pv>
| 阅读 <span id=busuanzi_value_page_pv></span>
</span>
</div>
</header>
<div class=post-toc id=post-toc>
<h2 class=post-toc-title>文章目录</h2>
<div class=post-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#简介>简介</a>
<ul>
<li><a href=#常用法>常用法</a></li>
</ul>
</li>
<li><a href=#参考>参考</a></li>
</ul>
</nav>
</div>
</div>
<div class=post-content>
<h1 id=sed>sed</h1>
<h2 id=简介>简介</h2>
<p>sed 是 unix 下常用的文本处理工具之一，</p>
<h3 id=常用法>常用法</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>   <span class=c1># 先读取资料、存入模式空间、对其进行编辑、再输出、再用下一行替换模式空间内容</span>
   <span class=c1># 调试工具sedsed (参数 -d)   http://aurelio.net/sedsed/sedsed-1.0</span>
        -n   <span class=c1># 输出由编辑指令控制(取消默认的输出,必须与编辑指令一起配合)</span>
        -i   <span class=c1># 直接对文件操作</span>
        -e   <span class=c1># 多重编辑</span>
        -r   <span class=c1># 正则可不转移特殊字符</span>
        b    <span class=c1># 跳过匹配的行</span>
        p    <span class=c1># 打印</span>
        d    <span class=c1># 删除</span>
        s    <span class=c1># 替换</span>
        g    <span class=c1># 配合s全部替换</span>
        i    <span class=c1># 行前插入</span>
        a    <span class=c1># 行后插入</span>
        r    <span class=c1># 读</span>
        y    <span class=c1># 转换</span>
        q    <span class=c1># 退出</span>
        <span class=p>&amp;</span>    <span class=c1># 代表查找的串内容</span>
        *    <span class=c1># 任意多个 前驱字符(前导符)</span>
        ?    <span class=c1># 0或1个 最小匹配 没加-r参数需转义 \?</span>
        $    <span class=c1># 最后一行</span>
        .*   <span class=c1># 匹配任意多个字符</span>
        <span class=se>\(</span>a<span class=se>\)</span>   <span class=c1># 保存a作为标签1(\1)</span>

模式空间<span class=o>{</span>
            <span class=c1># 模式空间(两行两行处理) 模式匹配的范围，一般而言，模式空间是输入文本中某一行，但是可以通过使用N函数把多于一行读入模式空间</span>
            <span class=c1># 暂存空间里默认存储一个空行</span>
            n   <span class=c1># 读入下一行(覆盖上一行)</span>
            h   <span class=c1># 把模式空间里的行拷贝到暂存空间</span>
            H   <span class=c1># 把模式空间里的行追加到暂存空间</span>
            g   <span class=c1># 用暂存空间的内容替换模式空间的行</span>
            G   <span class=c1># 把暂存空间的内容追加到模式空间的行后</span>
            x   <span class=c1># 将暂存空间的内容于模式空间里的当前行互换</span>
            ！  <span class=c1># 对其前面的要匹配的范围取反</span>
            D   <span class=c1># 删除当前模式空间中直到并包含第一个换行符的所有字符(/.*/匹配模式空间中所有内容，匹配到就执行D,没匹配到就结束D)</span>
            N   <span class=c1># 追加下一个输入行到模式空间后面并在第二者间嵌入一个换行符，改变当前行号码,模式匹配可以延伸跨域这个内嵌换行</span>
            p   <span class=c1># 打印模式空间中的直到并包含第一个换行的所有字符</span>
        <span class=o>}</span>


        标签函数<span class=o>{</span>
            : lable <span class=c1># 建立命令标记，配合b，t函数使用跳转</span>
            b lable <span class=c1># 分支到脚本中带有标记的地方，如果分支不存在则分支到脚本的末尾。</span>
            t labe  <span class=c1># 判断分支，从最后一行开始，条件一旦满足或者T,t命令，将导致分支到带有标号的命令出，或者到脚本末尾。与b函数不同在于t在执行跳转前会先检查其前一个替换命令是否成功，如成功，则执行跳转。</span>
            sed -e <span class=s1>&#39;{:p1;/A/s/A/AA/;/B/s/B/BB/;/[AB]\{10\}/b;b p1;}&#39;</span>     <span class=c1># 文件内容第一行A第二行B:建立标签p1;两个替换函数(A替换成AA,B替换成BB)当A或者B达到10个以后调用b,返回</span>
            <span class=nb>echo</span> <span class=s1>&#39;sd  f   f   [a    b      c    cddd    eee]&#39;</span> <span class=p>|</span> sed <span class=s1>&#39;:n;s#\(\[[^ ]*\)  *#\1#;tn&#39;</span>  <span class=c1># 标签函数t使用方法,替换[]里的空格</span>
            <span class=nb>echo</span> <span class=s2>&#34;198723124.03&#34;</span><span class=p>|</span>sed -r <span class=s1>&#39;:a;s/([0-9]+)([0-9]{3})/\1,\2/;ta&#39;</span>  <span class=c1># 每三个字符加一个逗号</span>
        <span class=o>}</span>


  引用外部变量<span class=o>{</span>
            sed -n <span class=s1>&#39;&#39;</span><span class=nv>$a</span><span class=s1>&#39;,10p&#39;</span>
            sed -n <span class=s2>&#34;&#34;</span><span class=nv>$a</span><span class=s2>&#34;,10p&#34;</span>
        <span class=o>}</span>

        sed 10q                                       <span class=c1># 显示文件中的前10行 (模拟&#34;head&#34;)</span>
        sed -n <span class=s1>&#39;$=&#39;</span>                                   <span class=c1># 计算行数(模拟 &#34;wc -l&#34;)</span>
        sed -n <span class=s1>&#39;5,/^no/p&#39;</span>                             <span class=c1># 打印从第5行到以no开头行之间的所有行</span>
        sed -i <span class=s2>&#34;/^</span><span class=nv>$f</span><span class=s2>/d&#34;</span> a     　　                  　 <span class=c1># 删除匹配行</span>
        sed -i <span class=s1>&#39;/aaa/,$d&#39;</span>                             <span class=c1># 删除匹配行到末尾</span>
        sed -i <span class=s2>&#34;s/=/:/&#34;</span> c                             <span class=c1># 直接对文本替换</span>
        sed -i <span class=s2>&#34;/^pearls/s/</span>$<span class=s2>/j/&#34;</span>                      <span class=c1># 找到pearls开头在行尾加j</span>
        sed <span class=s1>&#39;/1/,/3/p&#39;</span> file                           <span class=c1># 打印1和3之间的行</span>
        sed -n <span class=s1>&#39;1p&#39;</span> file                              <span class=c1># 取出指定行</span>
        sed <span class=s1>&#39;5i\aaa&#39;</span> file                             <span class=c1># 在第5行之前插入行</span>
        sed <span class=s1>&#39;5a\aaa&#39;</span> file                             <span class=c1># 在第5行之后抽入行</span>
        <span class=nb>echo</span> a<span class=p>|</span>sed -e <span class=s1>&#39;/a/i\b&#39;</span>                        <span class=c1># 在匹配行前插入一行</span>
        <span class=nb>echo</span> a<span class=p>|</span>sed -e <span class=s1>&#39;/a/a\b&#39;</span>                        <span class=c1># 在匹配行后插入一行</span>
        <span class=nb>echo</span> a<span class=p>|</span>sed <span class=s1>&#39;s/a/&amp;\nb/g&#39;</span>                       <span class=c1># 在匹配行后插入一行</span>
        seq 10<span class=p>|</span> sed -e<span class=o>{</span>1,3<span class=o>}</span><span class=s1>&#39;s/./a/&#39;</span>                   <span class=c1># 匹配1和3行替换</span>
        sed -n <span class=s1>&#39;/regexp/!p&#39;</span>                           <span class=c1># 只显示不匹配正则表达式的行</span>
        sed <span class=s1>&#39;/regexp/d&#39;</span>                               <span class=c1># 只显示不匹配正则表达式的行</span>
        sed <span class=s1>&#39;$!N;s/\n//&#39;</span>                              <span class=c1># 将每两行连接成一行</span>
        sed <span class=s1>&#39;/baz/s/foo/bar/g&#39;</span>                        <span class=c1># 只在行中出现字串&#34;baz&#34;的情况下将&#34;foo&#34;替换成&#34;bar&#34;</span>
        sed <span class=s1>&#39;/baz/!s/foo/bar/g&#39;</span>                       <span class=c1># 将&#34;foo&#34;替换成&#34;bar&#34;，并且只在行中未出现字串&#34;baz&#34;的情况下替换</span>
        <span class=nb>echo</span> a<span class=p>|</span>sed -e <span class=s1>&#39;s/a/#&amp;/g&#39;</span>                      <span class=c1># 在a前面加#号</span>
        sed <span class=s1>&#39;s/foo/bar/4&#39;</span>                             <span class=c1># 只替换每一行中的第四个字串</span>
        sed <span class=s1>&#39;s/\(.*\)foo/\1bar/&#39;</span>                      <span class=c1># 替换每行最后一个字符串</span>
        sed <span class=s1>&#39;s/\(.*\)foo\(.*foo\)/\1bar\2/&#39;</span>           <span class=c1># 替换倒数第二个字符串</span>
        sed <span class=s1>&#39;s/[0-9][0-9]$/&amp;5&#39;</span>                        <span class=c1># 在以[0-9][0-9]结尾的行后加5</span>
        sed -n <span class=s1>&#39; /^eth\|em[01][^:]/{n;p;}&#39;</span>            <span class=c1># 匹配多个关键字</span>
        sed -n -r <span class=s1>&#39; /eth|em[01][^:]/{n;p;}&#39;</span>           <span class=c1># 匹配多个关键字</span>
        <span class=nb>echo</span> -e <span class=s2>&#34;1\n2&#34;</span><span class=p>|</span>xargs -i -t sed <span class=s1>&#39;s/^/1/&#39;</span> <span class=o>{}</span>    <span class=c1># 同时处理多个文件</span>
        sed <span class=s1>&#39;/west/,/east/s/$/*VACA*/&#39;</span>                <span class=c1># 修改west和east之间的所有行，在结尾处加*VACA*</span>
        sed  <span class=s1>&#39;s/[^1-9]*\([0-9]\+\).*/\1/&#39;</span>             <span class=c1># 取出第一组数字，并且忽略掉开头的0</span>
        sed -n <span class=s1>&#39;/regexp/{g;1!p;};h&#39;</span>                   <span class=c1># 查找字符串并将匹配行的上一行显示出来，但并不显示匹配行</span>

        sed -n <span class=s1>&#39; /regexp/{n;p;}&#39;</span>                      <span class=c1># 查找字符串并将匹配行的下一行显示出来，但并不显示匹配行</span>
        sed -n <span class=s1>&#39;s/\(mar\)got/\1ianne/p&#39;</span>               <span class=c1># 保存\(mar\)作为标签1</span>
        sed -n <span class=s1>&#39;s/\([0-9]\+\).*\(t\)/\2\1/p&#39;</span>          <span class=c1># 保存多个标签</span>
        sed -i -e <span class=s1>&#39;1,3d&#39;</span> -e <span class=s1>&#39;s/1/2/&#39;</span>                  <span class=c1># 多重编辑(先删除1-3行，在将1替换成2)</span>
        sed -e <span class=s1>&#39;s/@.*//g&#39;</span> -e <span class=s1>&#39;/^$/d&#39;</span>                  <span class=c1># 删除掉@后面所有字符，和空行</span>
        sed -n -e <span class=s2>&#34;{s/^ *[0-9]*//p}&#34;</span>                  <span class=c1># 打印并删除正则表达式的那部分内容</span>
        <span class=nb>echo</span> abcd<span class=p>|</span>sed <span class=s1>&#39;y/bd/BE/&#39;</span>                      <span class=c1># 匹配字符替换</span>
        sed <span class=s1>&#39;/^#/b;y/y/P/&#39;</span> <span class=m>2</span>                          <span class=c1># 非#号开头的行替换字符</span>
        sed <span class=s1>&#39;/suan/r readfile&#39;</span>                        <span class=c1># 找到含suan的行，在后面加上读入的文件内容</span>
        sed -n <span class=s1>&#39;/no/w writefile&#39;</span>                      <span class=c1># 找到含no的行，写入到指定文件中</span>
        sed <span class=s1>&#39;/regex/G&#39;</span>                                <span class=c1># 在匹配式样行之后插入一空行</span>
        sed <span class=s1>&#39;/regex/{x;p;x;G;}&#39;</span>                       <span class=c1># 在匹配式样行之前和之后各插入一空行</span>
        sed <span class=s1>&#39;n;d&#39;</span>                                     <span class=c1># 删除所有偶数行</span>
        sed <span class=s1>&#39;G;G&#39;</span>                                     <span class=c1># 在每一行后面增加两空行</span>
        sed <span class=s1>&#39;/^$/d;G&#39;</span>                                 <span class=c1># 在输出的文本中每一行后面将有且只有一空行</span>
        sed <span class=s1>&#39;n;n;n;n;G;&#39;</span>                              <span class=c1># 在每5行后增加一空白行</span>
        sed -n <span class=s1>&#39;5~5p&#39;</span>                                 <span class=c1># 只打印行号为5的倍数</span>
        seq <span class=m>1</span> 30<span class=p>|</span>sed  <span class=s1>&#39;5~5s/.*/a/&#39;</span>                    <span class=c1># 倍数行执行替换</span>
        sed -n <span class=s1>&#39;3,${p;n;n;n;n;n;n;}&#39;</span>                  <span class=c1># 从第3行开始，每7行显示一次</span>
        sed -n <span class=s1>&#39;h;n;G;p&#39;</span>                              <span class=c1># 奇偶调换</span>
        seq <span class=m>1</span> 10<span class=p>|</span>sed <span class=s1>&#39;1!G;h;$!d&#39;</span>                      <span class=c1># 倒叙排列</span>
        ls -l<span class=p>|</span>sed -n <span class=s1>&#39;/^.rwx.*/p&#39;</span>                     <span class=c1># 查找属主权限为7的文件</span>
        <span class=nv>sed</span> <span class=o>=</span> filename <span class=p>|</span> sed <span class=s1>&#39;N;s/\n/\t/&#39;</span>             <span class=c1># 为文件中的每一行进行编号(简单的左对齐方式)</span>
        sed <span class=s1>&#39;s/^[ \t]*//&#39;</span>                             <span class=c1># 将每一行前导的&#34;空白字符&#34;(空格，制表符)删除,使之左对齐</span>
        sed <span class=s1>&#39;s/^[ \t]*//;s/[ \t]*$//&#39;</span>                 <span class=c1># 将每一行中的前导和拖尾的空白字符删除</span>
        sed <span class=s1>&#39;/{abc,def\}\/\[111,222]/s/^/00000/&#39;</span>      <span class=c1># 匹配需要转行的字符: } / [</span>

        <span class=nb>echo</span> abcd<span class=se>\\</span>nabcde <span class=p>|</span>sed <span class=s1>&#39;s/\\n/@/g&#39;</span> <span class=p>|</span>tr <span class=s1>&#39;@&#39;</span> <span class=s1>&#39;\n&#39;</span>        <span class=c1># 将换行符转换为换行</span>
        cat tmp<span class=p>|</span>awk <span class=s1>&#39;{print $1}&#39;</span><span class=p>|</span>sort -n<span class=p>|</span>sed -n <span class=s1>&#39;$p&#39;</span>           <span class=c1># 取一列最大值</span>
        sed -n <span class=s1>&#39;{s/^[^\/]*//;s/\:.*//;p}&#39;</span> /etc/passwd          <span class=c1># 取用户家目录(匹配不为/的字符和匹配:到结尾的字符全部删除)</span>
        <span class=nv>sed</span> <span class=o>=</span> filename <span class=p>|</span> sed <span class=s1>&#39;N;s/^/      /; s/ *\(.\{6,\}\)\n/\1   /&#39;</span>   <span class=c1># 对文件中的所有行编号(行号在左，文字右端对齐)</span>
        /sbin/ifconfig <span class=p>|</span>sed <span class=s1>&#39;s/.*inet addr:\(.*\) Bca.*/\1/g&#39;</span> <span class=p>|</span>sed -n <span class=s1>&#39;/eth/{n;p}&#39;</span>   <span class=c1># 取所有IP</span>

        修改keepalive配置剔除后端服务器<span class=o>{</span>
            sed -i <span class=s1>&#39;/real_server.*10.0.1.158.*8888/,+8 s/^/#/&#39;</span> keepalived.conf
            sed -i <span class=s1>&#39;/real_server.*10.0.1.158.*8888/,+8 s/^#//&#39;</span> keepalived.conf
        <span class=o>}</span>
        模仿rev功能<span class=o>{</span>
            <span class=nb>echo</span> <span class=m>123</span> <span class=p>|</span>sed <span class=s1>&#39;/\n/!G;s/\(.\)\(.*\n\)/&amp;\2\1/;//D;s/.//;&#39;</span>
            /<span class=se>\n</span>/!G<span class=p>;</span>         　　　　　　<span class=c1># 没有\n换行符，要执行G,因为保留空间中为空，所以在模式空间追加一空行</span>
            s/<span class=se>\(</span>.<span class=se>\)\(</span>.*<span class=se>\n\)</span>/<span class=p>&amp;</span><span class=se>\2\1</span>/<span class=p>;</span>     <span class=c1># 标签替换 &amp;\n23\n1$ (关键在于&amp; ,可以让后面//匹配到空行)</span>
            //D<span class=p>;</span>            　　　　　　<span class=c1># D 命令会引起循环删除模式空间中的第一部分，如果删除后，模式空间中还有剩余行，则返回 D 之前的命令，重新执行，如果 D 后，模式空间中没有任何内容，则将退出。  //D 匹配空行执行D,如果上句s没有匹配到,//也无法匹配到空行, &#34;//D;&#34;命令结束</span>
            s/.//<span class=p>;</span>          　　　　　　<span class=c1># D结束后,删除开头的 \n</span>
        <span class=o>}</span>

$ sed -n <span class=s1>&#39;m&#39;</span>p      filename.txt
$ sed -n <span class=s1>&#39;m,n&#39;</span>p     filename.txt
$ sed -n <span class=s1>&#39;m,$&#39;</span>p     filename.txt
$ sed -n <span class=s1>&#39;/pattern1/&#39;</span>p filename.txt
$ sed -n <span class=s1>&#39;/pattern1/,$&#39;</span>p filename.txt
$ sed -n <span class=s1>&#39;/pattern1/,/pattern2/&#39;</span>p filename.txt
$ sed -n <span class=s1>&#39;m,/pattern/&#39;</span>p filename.txt

<span class=c1>## 删除首行，尾行</span>
$ sed -n <span class=s1>&#39;1!P;N;$q;D&#39;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id=参考>参考</h2>
</div>
<div class=post-copyright>
<p class=copyright-item>
<span class=item-title>文章作者</span>
<span class=item-content>Justice</span>
</p>
<p class=copyright-item>
<span class=item-title>上次更新</span>
<span class=item-content>
2023-07-22 09:15:14
</span>
</p>
<p class=copyright-item>
<span class=item-title>许可协议</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span>
</p>
</div>
<div class=post-reward>
<input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label>
<div class=qr-code>
<label class=qr-code-image for=reward>
<img class=image src=/image/wx_reward_qrcode.png>
<span>微信打赏</span>
</label>
<label class=qr-code-image for=reward>
<img class=image src=/image/alipay_reward_qrcode.png>
<span>支付宝打赏</span>
</label>
<label class=qr-code-image for=reward>
<img class=image src=/image/bitcoin_reward_qrcode.png>
<span>比特币打赏</span>
</label>
</div>
</div>
<footer class=post-footer>
<div class=post-tags>
<a href=https://justice.bj.cn/tags/language/>language</a>
<a href=https://justice.bj.cn/tags/shell/>shell</a>
</div>
<nav class=post-nav>
<a class=prev href=/post/leetcode/131.%E5%88%86%E5%89%B2%E5%9B%9E%E6%96%87%E4%B8%B2/>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417l277.93508-310.326815c11.338233-12.190647 11.035334-32.285311-.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"/></svg>
</i>
<span class="prev-text nav-default">分割回文串</span>
<span class="prev-text nav-mobile">上一篇</span>
</a>
<a class=next href=/post/leetcode/97.%E4%BA%A4%E9%94%99%E5%AD%97%E7%AC%A6%E4%B8%B2/>
<span class="next-text nav-default">交错字符串</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697c-11.777231-11.500939-30.216186-10.304694-41.178865 2.712784z"/></svg>
</i>
</a>
</nav>
</footer>
</article>
<div class="post bg-white">
<script src=https://utteranc.es/client.js repo=ZhuZhengyi/gh_comment issue-term=pathname theme=github-light crossorigin=anonymous async></script>
</div>
</div>
</div>
<div class=modal-dialog>
<div class=modal-content>
<div id=closeSearch title=Close class=close>X</div>
<div id=fastSearch>
<input id=searchInput tabindex=0>
<ul id=searchResults>
</ul>
</div>
</div>
</div>
</main>
<footer id=footer class=footer>
<div class=icon-links>
<a href=mailto:justice_103@126.com rel="me noopener" class=iconfont title=email><svg class="icon" viewBox="0 0 1451 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z"/></svg>
</a>
<a href=https://justice.bj.cn/index.xml rel="noopener alternate" type=application/rss+xml class=iconfont title=rss target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><path d="M819.157333 1024C819.157333 574.592 449.408 204.8.0 204.8V0c561.706667.0 1024 462.293333 1024 1024H819.157333zM140.416 743.04a140.8 140.8.0 01140.501333 140.586667A140.928 140.928.0 01140.074667 1024C62.72 1024 0 961.109333.0 883.626667S62.933333 743.082667 140.416 743.04zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667v-199.04c372.352.0 678.784 306.517333 678.784 678.826667z"/></svg>
</a>
</div>
<div class=copyright>
<span class=power-by>
Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span>
<span class=division>|</span>
<span class=theme-info>
Theme - <a class=theme-link href=https://github.com/xianmin/hugo-theme-jane>Jane</a>
</span>
<span class=copyright-year>
&copy;
2000 -
2024
<span class=heart>
<i class=iconfont><svg class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14"><path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7.0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1.0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2.0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3.1-42.5-8-83.6-24-122.2z" fill="#8a8a8a"/></svg>
</i>
</span><span class=author>
Justice
</span></span>
<span id=busuanzi_container>
访客数/访问量：<span id=busuanzi_value_site_uv></span>/<span id=busuanzi_value_site_pv></span>
</span>
</div>
</footer>
<div class=back-to-top id=back-to-top>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35"><path d="M510.866688 227.694839 95.449397 629.218702h235.761562L329.15309 958.01517h362.40389L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777h894.052392v131.813095H63.840492V63.962777zm0 0"/></svg>
</i>
</div>
</div>
<script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script>
<script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script>
<script type=text/javascript src=/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin=anonymous></script>
<script type=text/javascript>window.MathJax={showProcessingMessages:!1,messageStyle:'none'}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css integrity=sha384-BdGj8xC2eZkQaxoQ8nSLefg4AV4/AwB3Fj+8SUSo7pnKP6Eoy18liIKTPn9oBYNG crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.js integrity=sha384-JiKN5O8x9Hhs/UE5cT5AAJqieYlOZbGT3CHws/y97o3ty4R7/O5poG9F3JoiOYw1 crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{})})</script>
<script type=text/javascript src=/js/load-photoswipe.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe.min.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe-ui-default.min.js></script>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<script>$("#search-btn").click(function(){$(".modal-dialog").addClass("visible")}),$("#closeSearch").click(function(){$(".modal-dialog").removeClass("visible")}),$(document).click(function(a){$(a.target).closest(".modal-content, #search-btn").length||$("body").find(".modal-dialog").removeClass("visible")})</script>
<script src=/js/fuse.min.js></script>
<script src=/js/fastsearch.js></script>
</body>
</html>