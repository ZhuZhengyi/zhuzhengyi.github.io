<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> - Justice的小站</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Justice" />
  <meta name="description" content="ChubaoFS Spark Shuffle Spark 简介 Spark 是一种是基于内存计算的大数据并行计算框架，主要分为 Driver、Worker 两个组件，可通过 yarn，mesos、k8s 进行调" />

  <meta name="keywords" content="Hugo, theme, jane" />






<meta name="generator" content="Hugo 0.83.1" />


<link rel="canonical" href="http://justice.bj.cn/post/40.storage/chubaofs/chubaofs-spark-shuffle3/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.b3a8813c06e6d785beba22bf8264e174fa2cb3a396b22f9ba24e2c00c18aaf7f.css" integrity="sha256-s6iBPAbm14W&#43;uiK/gmThdPoss6OWsi&#43;bok4sAMGKr38=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="" />
<meta property="og:description" content="ChubaoFS Spark Shuffle Spark 简介 Spark 是一种是基于内存计算的大数据并行计算框架，主要分为 Driver、Worker 两个组件，可通过 yarn，mesos、k8s 进行调" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://justice.bj.cn/post/40.storage/chubaofs/chubaofs-spark-shuffle3/" /><meta property="article:section" content="post" />

<meta property="og:site_name" content="Justice的小站" />

<meta itemprop="name" content="">
<meta itemprop="description" content="ChubaoFS Spark Shuffle Spark 简介 Spark 是一种是基于内存计算的大数据并行计算框架，主要分为 Driver、Worker 两个组件，可通过 yarn，mesos、k8s 进行调">

<meta itemprop="wordCount" content="2244">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="ChubaoFS Spark Shuffle Spark 简介 Spark 是一种是基于内存计算的大数据并行计算框架，主要分为 Driver、Worker 两个组件，可通过 yarn，mesos、k8s 进行调"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Justice's Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://justice.bj.cn/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://justice.bj.cn/post/">点滴</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://justice.bj.cn/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://justice.bj.cn/categories/">分类</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://gohugo.io" rel="noopener" target="_blank">
              更多
              
              <i class="iconfont">
                <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6C496.064 467.648 528.64 500.224 528.64 500.224 534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92 0 0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"></path>
  <path d="M841.152 457.152c-30.528 0-54.784 24.512-54.784 54.656l0 274.752L237.696 786.56 237.696 237.696l206.016 0c6.656 0 10.752 0 13.248 0C487.68 237.696 512 213.184 512 182.848 512 152.32 487.36 128 456.96 128L183.04 128C153.216 128 128 152.576 128 182.848c0 3.136 0.256 6.272 0.768 9.28C128.256 195.136 128 198.272 128 201.408l0 639.488c0 0.064 0 0.192 0 0.256 0 0.128 0 0.192 0 0.32 0 30.528 24.512 54.784 54.784 54.784l646.976 0c6.592 0 9.728 0 11.712 0 28.736 0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344l0-20.352L896 561.408 896 512.128C896 481.792 871.424 457.152 841.152 457.152z"></path>
</svg>

              </i>
            </a>
          
        
      </li>
    

    
      <li class="mobile-menu-item">
        <a id="openSearchMobile" class="mobile-menu-item-link menu-item-search" href="#">
          <i class="iconfont">
            <svg version="1.1" viewBox="0 0 1024 1024"
  xmlns="http://www.w3.org/2000/svg" width="18" height="18"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M973.81454219 973.81454219a91.78207815 91.78207815 0 0 1-129.80999631 0l-161.97482118-161.97482118a425.48527711 425.48527711 0 0 1-230.35931791 68.16531768 428.3346319 428.3346319 0 1 1 428.3346319-428.3346319 425.48527711 425.48527711 0 0 1-68.16531768 230.35931791l162.02961656 161.97482118a91.83687354 91.83687354 0 0 1-0.05479538 129.80999631zM451.67040679 145.69361559a305.97679241 305.97679241 0 1 0 0 611.95358361 305.97679241 305.97679241 0 0 0 0-611.95358361z">
  </path>
</svg>

          </i>
        </a>
      </li>
    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  
    
<div class="modal-dialog">
    
    <div class="modal-content">
      <div id="closeSearch" title="Close" class="close">X</div>
      <div class="modal-header">
        <div class="modal-title">Search</div>
      </div>
      <div class="modal-body">
          <script>
            (function() {
              var cx = '';
              var gcse = document.createElement('script');
              gcse.type = 'text/javascript';
              gcse.async = true;
              gcse.src = (document.location.protocol == 'https:' ? 'https:' :
                  'http:') +
                '//cse.google.com/cse.js?cx=' + cx;
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(gcse, s);
            })();
          </script>
          <gcse:search></gcse:search>
      </div>
    </div>
</div>

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Justice's Blog
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://justice.bj.cn/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://justice.bj.cn/post/">点滴</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://justice.bj.cn/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://justice.bj.cn/categories/">分类</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://gohugo.io" rel="noopener" target="_blank">
              更多
              
              <i class="iconfont">
                <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6C496.064 467.648 528.64 500.224 528.64 500.224 534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92 0 0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"></path>
  <path d="M841.152 457.152c-30.528 0-54.784 24.512-54.784 54.656l0 274.752L237.696 786.56 237.696 237.696l206.016 0c6.656 0 10.752 0 13.248 0C487.68 237.696 512 213.184 512 182.848 512 152.32 487.36 128 456.96 128L183.04 128C153.216 128 128 152.576 128 182.848c0 3.136 0.256 6.272 0.768 9.28C128.256 195.136 128 198.272 128 201.408l0 639.488c0 0.064 0 0.192 0 0.256 0 0.128 0 0.192 0 0.32 0 30.528 24.512 54.784 54.784 54.784l646.976 0c6.592 0 9.728 0 11.712 0 28.736 0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344l0-20.352L896 561.408 896 512.128C896 481.792 871.424 457.152 841.152 457.152z"></path>
</svg>

              </i>
            </a>
          

        

      </li>
    

    
    

    
      <li class="menu-item">
        <a id="openSearch" class="menu-item-link menu-item-search" href="#">
          <i class="iconfont">
            <svg version="1.1" viewBox="0 0 1024 1024"
  xmlns="http://www.w3.org/2000/svg" width="18" height="18"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M973.81454219 973.81454219a91.78207815 91.78207815 0 0 1-129.80999631 0l-161.97482118-161.97482118a425.48527711 425.48527711 0 0 1-230.35931791 68.16531768 428.3346319 428.3346319 0 1 1 428.3346319-428.3346319 425.48527711 425.48527711 0 0 1-68.16531768 230.35931791l162.02961656 161.97482118a91.83687354 91.83687354 0 0 1-0.05479538 129.80999631zM451.67040679 145.69361559a305.97679241 305.97679241 0 1 0 0 611.95358361 305.97679241 305.97679241 0 0 0 0-611.95358361z">
  </path>
</svg>

          </i>
        </a>
      </li>
    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title"></h1>
      
      <div class="post-meta">
        <time datetime="0001-01-01" class="post-time">
          0001-01-01
        </time>
        
        

        
        
          <span id="busuanzi_container_page_pv">
            | 阅读 <span id="busuanzi_value_page_pv"></span>
          </span>
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#spark-简介">Spark 简介</a></li>
    <li><a href="#spark-计算模型">Spark 计算模型</a></li>
    <li><a href="#spark-shuffle">Spark Shuffle</a></li>
    <li><a href="#shuffle-writer">Shuffle Writer</a></li>
    <li><a href="#shuffle-read">Shuffle Read</a></li>
    <li><a href="#现有shuffle痛点">现有Shuffle痛点</a></li>
    <li><a href="#shuffle-改进方案">Shuffle 改进方案</a></li>
    <li><a href="#chubao-spark-shuffle">Chubao Spark Shuffle</a></li>
    <li><a href="#基本方案">基本方案</a></li>
    <li><a href="#相关类">相关类</a></li>
    <li><a href="#主要接口">主要接口</a></li>
  </ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <h1 id="chubaofs-spark-shuffle">ChubaoFS Spark Shuffle</h1>
<h2 id="spark-简介">Spark 简介</h2>
<p>Spark 是一种是基于内存计算的大数据并行计算框架，主要分为 Driver、Worker 两个组件，可通过 yarn，mesos、k8s 进行调度。其主要架构如下：</p>
<p><img src="https://gitee.com/justice/gitnote-img-bed/raw/master/2020/11/12-21-08-29-2020-01-15-14-49-53-image.png" alt=""></p>
<p>主要组件</p>
<ul>
<li>
<p>client：负责提交task；</p>
</li>
<li>
<p>Driver Node：驱动节点，负责接受client任务提交，并分派任务，监控任务执行；</p>
</li>
<li>
<p>Cluster Manager：集群管理器，yarn、mesos、k8s；</p>
</li>
<li>
<p>Worker Node：工作节点，负责task的具体执行；</p>
</li>
</ul>
<hr>
<h2 id="spark-计算模型">Spark 计算模型</h2>
<p>Spark 将数据抽象为<code>RDD</code>(弹性数据集)，并根据数据的依赖关系将RDD计算过程划分为一个个<code>Stage</code>，RDD随着计算过程在各个Stage间流动。</p>
<p><img src="https://gitee.com/justice/gitnote-img-bed/raw/master/2020/11/12-21-08-36-2020-02-28-09-24-02-image.png" alt=""></p>
<hr>
<p>在计算过程中需要处理大量数据，其涉及的 IO 主要包括以下几个：</p>
<ul>
<li>
<p><strong>输入</strong>：任务开始从外部数据源读取以构建输入 RDD，支持多种实现接口：hdfs, file, s3 等；</p>
</li>
<li>
<p><strong>输出</strong>：计算任务结束后的数据输出，写入到外部存储；</p>
</li>
<li>
<p><strong>Shuffle</strong>：两个 stage 之间的数据操作，包括可分为 shuffle write，shuffle read 两个阶段；</p>
</li>
<li>
<p><strong>Spill</strong>：Shuffle 过程中有些操作需要大量的内存，为避免 jvm 的 oom，需要将缓存数据临时存入磁盘中，这个过程称为 spill；</p>
</li>
</ul>
<hr>
<h2 id="spark-shuffle">Spark Shuffle</h2>
<p>Spark 2 个 Stage间需要对所有中间数据进行重排，这个过程称为<code>Shuffle</code>。Shuffle 过程需要操作大量的数据，无法全部在内存中完成，因此数据需要进行存储到磁盘中。Shuffle过程分为Shuffle Write 和 Shuffle Read两个阶段。</p>
<p>Shuffle Write将上一个 stage 的 输出数据写入磁盘中，并且把数据位置元信息上报到 driver 的中， Shuffle Read在下一个 stage 开始，根据数据位置元信息，拉取对应的数据作为该stage的输入。</p>
<p><img src="https://gitee.com/justice/gitnote-img-bed/raw/master/2020/11/12-21-08-43-2020-01-21-15-56-38-image.png" alt=""></p>
<hr>
<h2 id="shuffle-writer">Shuffle Writer</h2>
<p>spark 2.x中 shuffle write 有 3 种具体的实现：</p>
<ul>
<li>
<p><code>BypassMergeSortShuffleWriter</code>：不需要进行Map端合并，并且RDD对应的依赖中的Partition的数量&lt;=配置参数（默认200）。这种writer会直接将数据通过hash将数据分区写入一个个临时文件中，最后合并处理，最终形成一个dataFile和indexFile；</p>
</li>
<li>
<p><code>SortShuffleWriter</code>：Serializer支持relocation操作且允许对将要输出数据对象进行排序。sortshufflewriter在将数据写入磁盘前，会根据key对的数据进行外部排序，最终形成的文件；</p>
</li>
<li>
<p><code>UnsafeShuffleWriter</code>：UnsafeShuffleWriter 将数据序列化后插入sorter，然后对已经序列化的record进行排序，并在排序完成后写入磁盘文件作为spill file，再将多个spill file合并成一个输出文件。</p>
</li>
</ul>
<p><img src="../../img/2020-01-20-17-32-11-image.png" alt=""></p>
<hr>
<h2 id="shuffle-read">Shuffle Read</h2>
<p>Shuffle Read 主要分为 fetch 和 aggreation 两个步骤：</p>
<ul>
<li>
<p>fetch：将shuffle write的各个分散数据拉取到本地；</p>
</li>
<li>
<p>aggregate：将拉取的数据根据分区ID聚合，最终得到该分区相关输入RDD；</p>
</li>
</ul>
<p><img src="../../img/2020-01-20-17-51-58-image.png" alt=""></p>
<hr>
<h2 id="现有shuffle痛点">现有Shuffle痛点</h2>
<ol>
<li>
<p>shuffle数据有各个节点自行管理，计算和存储紧密结合，不便动态调度；</p>
</li>
<li>
<p>shuffle过程数据膨胀厉害（平均膨胀4倍）；</p>
</li>
<li>
<p>shuffle数据量巨大，io瓶颈；</p>
</li>
</ol>
<hr>
<h2 id="shuffle-改进方案">Shuffle 改进方案</h2>
<ul>
<li>[SPARK-1529](<a href="https://issues.apache.org/jira/browse/SPARK-1529">[SPARK-1529] Support DFS based shuffle in addition to Netty shuffle - ASF JIRA</a>)：一种提出使用hdfs进行shuffle落盘的提案。未实现（有人测试过，性能约为15%）。</li>
<li><a href="https://issues.apache.org/jira/browse/SPARK-25299">SPARK-25299</a>: 讨论了现有 external shuffle service 的不足，提出了几种使用远程存储的改进方案，未实现；</li>
<li><a href="https://zhuanlan.zhihu.com/p/89384057">搜狗Alluxio for Shuffle</a>： 搜狗使用 alluxio 来存储 shuffle 数据，性能提升非常明显(没有具体的数据)；</li>
<li><a href="https://bestoreo.github.io/post/riffle/riffle/">Facebook的SOS</a>： 将大量小的 shuffle 读请求转换成少并且大的顺序 I/O 请求。作业整体的 I/O 提升了两倍，计算效率提高10％。</li>
<li><a href="https://juejin.im/post/5dbe72ad51882525045db1c5">阿里Smart shuffle</a>：shuffle数据在map端累积到一定数量发送到reduce端, shuffle数据的生成和shuffle数据的发送可以并行执行。</li>
<li><a href="https://github.com/zrlio/crail-spark-io">crail-spark-io</a>：使用RDMA网络来改进shuffle过程中的网络IO瓶颈；</li>
</ul>
<hr>
<h2 id="chubao-spark-shuffle">Chubao Spark Shuffle</h2>
<p>ChubaoFS Spark Shuffle 是基于ChubaoFS的spark shuffle插件，依托ChubaoFS的分布式、高可靠、高性能存储为Spark Shuffle 提供可靠的共享存储接口，以实现spark的存储与计算分离。</p>
<p>目标：</p>
<ul>
<li>
<p>依靠chubaofs，实现spark的存储与计算分离；</p>
</li>
<li>
<p>插件化，兼容spark原有架构，方便升级更新；</p>
</li>
<li>
<p>优化shuffle 存储层读写流程，提升shuffle性能；</p>
</li>
</ul>
<hr>
<h2 id="基本方案">基本方案</h2>
<p><img src="../../img/2020-02-28-11-04-03-image.png" alt=""></p>
<hr>
<h2 id="相关类">相关类</h2>
<p><img src="../../img/chubaofs-spark-shuffle01.png" alt=""></p>
<hr>
<h2 id="主要接口">主要接口</h2>
<ul>
<li>
<p><code>ChubaoShuffleManager</code>：继承自<code>ShuffleManger</code>, 实现ShuffleManager插件管理相关接口；</p>
<ul>
<li>
<p>registerShuffle/unregisterShuffle: 根据参数注册不同类型的shuffle handle，以</p>
</li>
<li>
<p>getWriter：获取具体的ShuffleWriter；</p>
</li>
<li>
<p>getReader:  获取具体的ShuffleReader；</p>
</li>
<li>
<p>stop: shuffle模块停止时的收尾处理；</p>
</li>
</ul>
</li>
<li>
<p><code>ChubaoBypassSortShuffleHandle</code>/<code>ChubaoSerializedShuffleHandle</code>: 分别对应不同的情形下的shuffle操作handle；</p>
</li>
<li>
<p><code>ChubaoShuffleWriter</code>：shuffle writer的具体实现</p>
<ul>
<li>
<p>write：根据需要对shuffle map out 数据进行排序分组，写入到chubaofs中，并将数据块路径及索引上报给<code>MapOutTracerMaster</code>；</p>
</li>
<li>
<p>stop：writer结束后的处理流程；</p>
</li>
</ul>
</li>
<li>
<p><code>ChubaoShuffleReader</code>:</p>
<ul>
<li>read：通过<code>MapOutTracer</code>获取对应executor的数据块迭代器；</li>
</ul>
</li>
<li>
<p><code>ChubaoShuffleBlockResolve</code>：chubao shuffle 数据块组织</p>
</li>
<li>
<p><code>ChubaoSorter</code>/<code>UnSafeSorter</code>: 不同情形下的排序操作；</p>
<ul>
<li>
<p>spill：排序过程中的数据溢出操作；</p>
</li>
<li>
<p>insertAll: 具体插入排序实现；</p>
</li>
</ul>
</li>
<li>
<p><code>ChubaoBufferedOutputStream</code>:  shuffle操作过程缓冲数据流实现；</p>
</li>
<li>
<p><code>ChubaoSpillInfo</code>：spill数据组织信息；</p>
</li>
</ul>

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Justice</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
      0001-01-01
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    
    
  </div>
</div>

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/40.storage/chubaofs/chubaofs-spark-shuffle/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default"></span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/40.storage/chubaofs/chubaofs-vs-nfs%E5%AF%B9%E6%AF%94%E6%B5%8B%E8%AF%95/">
            <span class="next-text nav-default"></span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  

  
  

  

  <div class="post bg-white">
      <div id="comments-gitment"></div>
      <link rel="stylesheet" href="/lib/gitment/gitment-0.0.3.min.css">
        <script src="/lib/gitment/gitment-0.0.3.min.js"></script>
      <script type="text/javascript">
      const gitment = new Gitment({
        id: 'chubaofs-spark-shuffle3.md',
        title: '',
        link: decodeURI(location.href),
        desc: 'ChubaoFS Spark Shuffle Spark 简介 Spark 是一种是基于内存计算的大数据并行计算框架，主要分为 Driver、Worker 两个组件，可通过 yarn，mesos、k8s 进行调',
        owner: 'zhengyi.zhu.hust@gmail.com',
        repo: '',
        oauth: {
          client_id: '',
          client_secret: ''
        }
      })
      gitment.render('comments-gitment')
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://github.com/imsun/gitment">comments powered by gitment.</a></noscript>
    </div>

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  


<a href="http://justice.bj.cn/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2000 -
    2021
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Justice
        
      </span></span>

  
  
    <span id="busuanzi_container">
      访客数/访问量：<span id="busuanzi_value_site_uv"></span>/<span id="busuanzi_value_site_pv"></span>
    </span>
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>



  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML' async></script>



  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css"
    integrity="sha384-BdGj8xC2eZkQaxoQ8nSLefg4AV4/AwB3Fj+8SUSo7pnKP6Eoy18liIKTPn9oBYNG"
    crossorigin="anonymous">

  
  <script defer
    src="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.js"
    integrity="sha384-JiKN5O8x9Hhs/UE5cT5AAJqieYlOZbGT3CHws/y97o3ty4R7/O5poG9F3JoiOYw1"
    crossorigin="anonymous"></script>

  
  <script defer
    src="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/contrib/auto-render.min.js"
    integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI"
    crossorigin="anonymous" onload="renderMathInElement(document.body);">
  </script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        
      });
    });
  </script>






  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  




  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>








  <script>
    $("#openSearch, #openSearchMobile").click(function(){
      $(".modal-dialog").addClass("visible");
    });

    $("#closeSearch").click(function(){
      $(".modal-dialog").removeClass("visible");
    });

    $(document).click(function(event) {
    
      if (!$(event.target).closest(".modal-content, #openSearch, #openSearchMobile").length) {
        $("body").find(".modal-dialog").removeClass("visible");
      }
    });
  </script>





</body>
</html>
